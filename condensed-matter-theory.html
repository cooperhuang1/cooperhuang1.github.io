<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>凝聚态理论扑克牌</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for the Inter font and background */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; /* Very dark, almost black background */
            color: #c9d1d9; /* Soft light gray text for contrast */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh; /* Ensure body takes full viewport height */
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        /* Header styling */
        header {
            width: 100%;
            text-align: center;
            padding: 1.5rem 1rem;
            background-color: #161b22;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            z-index: 10;
        }
        header h1 {
            font-size: 3rem;
            font-weight: 700;
            color: #60a5fa; /* Blue accent for title */
            margin-bottom: 0.25rem;
            letter-spacing: -0.05em;
        }
        header p {
            font-size: 1rem;
            color: #9ca3af;
        }

        /* Card Stack Container */
        #cardStackContainer {
            flex-grow: 1; /* Allow container to take available space */
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            padding: 2rem 1rem; /* Add padding to ensure cards don't touch edges */
            position: relative; /* For absolute positioning of cards */
            min-height: 60vh; /* Ensure enough space for fanned cards, especially vertically */
            max-width: 1200px; /* Limit max width on very large screens */
        }

        /* Individual Card Styling */
        .card {
            position: absolute; /* Stack cards on top of each other */
            width: 200px; /* Standard card width */
            height: 300px; /* Standard card height */
            background-color: #1e2329; /* Dark card background */
            border-radius: 1rem;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.4);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 1rem;
            cursor: pointer;
            border: 2px solid #30363d; /* Subtle border */

            /* Initial state (stacked) will be set by JS using CSS variables */
            transform: translateY(var(--initial-y, 0px)) rotateZ(var(--initial-rot, 0deg));
            z-index: var(--initial-z, 1);
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), /* Smooth ease-out */
                        box-shadow 0.3s ease,
                        background-color 0.3s ease,
                        z-index 0.1s ease; /* Z-index changes quickly */
            transform-origin: center center; /* Pivot point for fanning */
        }

        .card-keyword {
            font-size: 1.8rem;
            font-weight: 600;
            color: #60a5fa; /* Blue for keywords */
            margin-bottom: 0.5rem;
            line-height: 1.2;
        }

        .card-category {
            font-size: 0.9rem;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Fanned out state when container is hovered (Desktop default) */
        #cardStackContainer:hover .card {
            transform: translateX(var(--fan-x, 0px)) translateY(var(--fan-y, 0px)) rotateZ(var(--fan-rot, 0deg));
            transition-delay: var(--delay, 0s); /* Staggered delay for fanning out */
            z-index: var(--fan-z, 1); /* New z-index for fanned state */
        }

        /* Individual card hover effect (when fanned out) */
        #cardStackContainer:hover .card:hover {
            transform: translateX(var(--fan-x)) translateY(calc(var(--fan-y) - 25px)) rotateZ(var(--fan-rot)) scale(1.1); /* Lift and scale more */
            box-shadow: 0 18px 35px rgba(96, 165, 250, 0.9); /* Stronger blue glow */
            background-color: #2a3038; /* Slightly lighter on hover */
            z-index: 200; /* Bring hovered card to very front */
            transition-delay: 0s; /* No delay on individual hover */
        }


        /* --- Responsive adjustments for smaller screens (e.g., mobile) --- */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2.2rem; /* Smaller title */
            }
            header p {
                font-size: 0.85rem;
            }
            .card {
                width: 130px; /* Smaller cards on mobile */
                height: 195px;
                padding: 0.6rem;
            }
            .card-keyword {
                font-size: 1.3rem;
            }
            .card-category {
                font-size: 0.7rem;
            }

            /* Mobile specific fanning: vertical cascade */
            #cardStackContainer:hover .card {
                transform: translateX(var(--fan-x-mobile, 0px)) translateY(var(--fan-y-mobile, 0px)) rotateZ(var(--fan-rot-mobile, 0deg));
                /* Use mobile-specific variables for fanning */
                transition-delay: var(--delay, 0s); /* Keep staggered delay */
                z-index: var(--fan-z, 1); /* Z-index based on original index for stacking order */
            }

            /* Individual card hover effect for mobile fanned state */
            #cardStackContainer:hover .card:hover {
                transform: translateX(var(--fan-x-mobile)) translateY(calc(var(--fan-y-mobile) - 15px)) rotateZ(var(--fan-rot-mobile)) scale(1.08); /* Lift and scale slightly less */
                box-shadow: 0 12px 25px rgba(96, 165, 250, 0.8); /* Adjusted shadow */
                background-color: #2a3038;
                z-index: 200; /* Bring hovered card to very front */
                transition-delay: 0s;
            }
        }


        /* Modal overlay styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.88);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease-in-out;
        }

        .modal-overlay.show {
            opacity: 1;
            pointer-events: auto;
        }

        .modal-content {
            background-color: #161b22;
            border-radius: 1.5rem;
            padding: 3rem;
            max-width: 900px;
            width: 90%;
            max-height: 90%;
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
            position: relative;
            transform: translateY(30px);
            transition: transform 0.3s ease-in-out;
            border: 2px solid #30363d;
        }

        .modal-overlay.show .modal-content {
            transform: translateY(0);
        }

        .modal-title {
            font-size: 3rem;
            font-weight: 700;
            color: #60a5fa;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .modal-body {
            font-size: 1.15rem;
            line-height: 1.8;
            color: #c9d1d9;
            text-align: justify;
        }
        .modal-body p {
            margin-bottom: 1.2em;
        }
        .modal-body ul {
            list-style: disc;
            padding-left: 1.8em;
            margin-bottom: 1.2em;
        }

        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 2.5rem;
        }

        .modal-button {
            background-color: #818CF8;
            color: #0d1117;
            padding: 0.9rem 2.5rem;
            border-radius: 0.75rem;
            border: none;
            cursor: pointer;
            font-size: 1.15rem;
            font-weight: 600;
            transition: background-color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 15px rgba(129, 140, 248, 0.4);
        }

        .modal-button:hover {
            background-color: #6366f1;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(129, 140, 248, 0.6);
        }

        .modal-learn-more-button {
            background-color: #60a5fa;
            box-shadow: 0 4px 15px rgba(96, 165, 250, 0.4);
        }

        .modal-learn-more-button:hover {
            background-color: #3b82f6;
            box-shadow: 0 6px 20px rgba(96, 165, 250, 0.6);
        }

        footer {
            width: 100%;
            text-align: center;
            padding: 1rem;
            background-color: #161b22;
            color: #6b7280;
            font-size: 0.8rem;
            margin-top: auto;
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.3);
        }

        /* Responsive adjustments for modal on smaller screens */
        @media (max-width: 768px) {
            .modal-content {
                padding: 1.5rem;
                width: 95%; /* Make modal slightly wider on mobile */
            }
            .modal-title {
                font-size: 1.8rem;
            }
            .modal-body {
                font-size: 1rem;
            }
            .modal-buttons {
                flex-direction: column;
                gap: 1rem;
            }
            .modal-button {
                width: 100%;
                padding: 0.75rem 1.5rem;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body class="antialiased leading-relaxed">
    <header>
        <h1 class="text-blue-400">凝聚态理论扑克牌</h1>
        <p class="text-gray-400">将鼠标悬停在卡片区域，探索物质的奥秘</p>
    </header>

    <div id="cardStackContainer">
        </div>

    <footer>
        <p>&copy; 2025 凝聚态理论扑克牌. 版权所有.</p>
    </footer>

    <div id="infoModal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="modalTitle" class="modal-title"></h3>
            <div id="modalBody" class="modal-body"></div>
            <div class="modal-buttons">
                <button id="learnMoreButton" class="modal-button modal-learn-more-button">了解更多</button>
                <button id="closeModalButton" class="modal-button">关闭</button>
            </div>
        </div>
    </div>

    <script>
        // --- DOM Elements ---
        const cardStackContainer = document.getElementById('cardStackContainer');
        const infoModal = document.getElementById('infoModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalBody = document.getElementById('modalBody');
        const closeModalButton = document.getElementById('closeModalButton');
        const learnMoreButton = document.getElementById('learnMoreButton');

        // --- Room Data (Condensed Matter Theory Keywords) ---
        const roomKeywords = [
            // 基础理论楼层 (Floor 1)
            { id: 'fermi_surface', keyword: '费米面', description: '费米面是金属中电子在动量空间中的边界，它定义了电子在绝对零度下的占据状态，对理解金属的导电性、磁性等性质至关重要。', category: '基础理论', externalLink: 'https://zh.wikipedia.org/wiki/%E8%B4%B9%E7%B1%B3%E9%9D%A2' },
            { id: 'bloch_theorem', keyword: '布洛赫定理', description: '布洛赫定理描述了晶体中电子的波函数形式，指出电子在周期性势场中运动时，其波函数可以表示为一个平面波乘以一个与晶格周期性相同的函数。', category: '基础理论', externalLink: 'https://zh.wikipedia.org/wiki/%E5%B8%83%E6%B4%9B%E8%B5%AB%E5%AE%9A%E7%90%86' },
            { id: 'band_structure', keyword: '能带结构', description: '能带结构描述了电子在固体中允许的能量范围，由一系列连续的能带组成，能带之间的禁带决定了材料是导体、半导体还是绝缘体。', category: '基础理论', externalLink: 'https://zh.wikipedia.org/wiki/%E8%83%BD%E5%B8%A6%E7%BB%93%E6%9E%84' },
            { id: 'lattice_vibration', keyword: '格点振动', description: '格点振动是指晶体中原子围绕其平衡位置的集体振动。这些振动的量子化形式被称为声子，在材料的热学、电学和光学性质中扮演重要角色。', category: '基础理论', externalLink: 'https://zh.wikipedia.org/wiki/%E5%A3%B0%E5%AD%90' },
            { id: 'dft', keyword: '密度泛函理论', description: '密度泛函理论是一种计算多电子体系基态性质的量子力学方法。它将复杂的多体薛定谔方程转化为基于电子密度的单粒子方程，广泛应用于材料科学和化学。', category: '基础理论', externalLink: 'https://zh.wikipedia.org/wiki/%E5%AF%86%E5%BA%A6%E6%B3%9B%E5%87%BD%E6%95%B0%E7%90%86%E8%AE%BA' },
            { id: 'mean_field_theory', keyword: '平均场理论', description: '平均场理论是一种近似处理多体相互作用的方法，它将单个粒子与其他所有粒子的相互作用近似为该粒子在一个平均场中的运动，简化了复杂系统的分析。', category: '基础理论', externalLink: 'https://zh.wikipedia.org/wiki/%E5%B9%B3%E5%9D%87%E5%9C%BA%E7%90%86%E8%AE%BA' },
            { id: 'phase_transition', keyword: '相变', description: '相变是物质宏观性质发生突变的现象，如固态、液态、气态之间的转变，以及超导、磁性等更复杂的量子相变。理解相变是凝聚态物理的核心问题之一。', category: '基础理论', externalLink: 'https://zh.wikipedia.org/wiki/%E7%9B%B8%E5%8F%98' },
            { id: 'critical_phenomena', keyword: '临界现象', description: '临界现象是指在相变点附近，物质的宏观性质（如比热、磁化率）表现出异常行为的现象。它通常伴随着长程关联和标度不变性。', category: '基础理论', externalLink: 'https://zh.wikipedia.org/wiki/%E4%B8%B4%E7%95%8C%E7%8E%B0%E8%B1%B0' },

            // 特殊现象楼层 (Floor 2)
            { id: 'superconductivity', keyword: '超导', description: '超导是指某些材料在低于某一临界温度时，电阻完全消失且能完全排出磁场的现象。它在能源传输、磁悬浮和医疗成像等领域有巨大潜力。', category: '特殊现象', externalLink: 'https://zh.wikipedia.org/wiki/%E8%B6%85%E5%AF%BC' },
            { id: 'semiconductor', keyword: '半导体', description: '半导体是导电性介于导体和绝缘体之间材料，其导电性可以通过掺杂或温度变化来控制。它是现代电子器件（如晶体管、二极管）的基础。', category: '特殊现象', externalLink: 'https://zh.wikipedia.org/wiki/%E5%8D%8A%E5%AF%BC%E4%BD%93' },
            { id: 'topological_insulator', keyword: '拓扑绝缘体', description: '拓扑绝缘体是一种特殊的量子材料，其内部是绝缘体，但表面或边缘却能导电，且这些导电态受到拓扑保护，对杂质和缺陷不敏感。', category: '特殊现象', externalLink: 'https://zh.wikipedia.org/wiki/%E6%8B%93%E6%89%91%E7%BB%9D%E7%BC%98%E4%BD%93' },
            { id: 'magnetism', keyword: '磁性', description: '磁性是材料对磁场响应的性质，源于电子的轨道运动和自旋。常见的磁性类型包括顺磁性、抗磁性、铁磁性、反铁磁性等。', category: '特殊现象', externalLink: 'https://zh.wikipedia.org/wiki/%E7%A3%81%E6%80%A7' },
            { id: 'quantum_hall_effect', keyword: '量子霍尔效应', description: '量子霍尔效应是指在强磁场和极低温下，二维电子系统中的霍尔电导被精确量子化的现象。它在精密测量和拓扑物理研究中具有重要意义。', category: '特殊现象', externalLink: 'https://zh.wikipedia.org/wiki/%E9%87%8F%E5%AD%90%E9%9C%8D%E5%B0%94%E6%95%88%E5%BA%94' },
            { id: 'anderson_localization', keyword: '安德森局域化', description: '安德森局域化是指在无序介质中，电子波函数由于散射而变得局域化的现象，导致材料从导体变为绝缘体，即使在零温度下也是如此。', category: '特殊现象', externalLink: 'https://zh.wikipedia.org/wiki/%E5%AE%89%E5%BE%B7%E6%A3%AE%E5%B1%80%E5%9F%9F%E5%8C%96' },
            { id: 'kondo_effect', keyword: '近藤效应', description: '近藤效应是指在含有少量磁性杂质的金属中，在极低温下电阻率出现异常增大的现象。这是由于导电电子与磁性杂质自旋之间的相互作用引起的。', category: '特殊现象', externalLink: 'https://zh.wikipedia.org/wiki/%E8%BF%91%E8%97%A4%E6%95%88%E5%BA%94' },
            { id: 'bec', keyword: '玻色-爱因斯坦凝聚', description: '玻色-爱因斯坦凝聚是玻色子在极低温下占据最低量子态的现象，形成一个宏观量子态。它是一种宏观量子现象，在超流体和量子计算等领域有应用。', category: '特殊现象', externalLink: 'https://zh.wikipedia.org/wiki/%E7%8E%BB%E8%89%B2-%E7%88%B1%E5%9B%A0%E6%96%AF%E5%9D%A6%E5%87%9D%E8%81%9A' },

            // 前沿研究楼层 (Floor 3)
            { id: 'superfluidity', keyword: '超流体', description: '超流体是一种具有零粘滞性流动的量子流体，可以在没有摩擦的情况下流动。氦-4在极低温下可以转变为超流体。', category: '前沿研究', externalLink: 'https://zh.wikipedia.org/wiki/%E8%B6%85%E6%B5%81%E4%BD%93' },
            { id: 'quantum_phase_transition', keyword: '量子相变', description: '量子相变是指在绝对零度下，由量子涨落而非热涨落驱动的相变。它通常通过改变非热参数（如磁场、压力）来实现。', category: '前沿研究', externalLink: 'https://zh.wikipedia.org/wiki/%E9%87%8F%E5%AD%90%E7%9B%B8%E5%8F%98' },
            { id: 'strongly_correlated', keyword: '强关联电子系统', description: '强关联电子系统是指电子之间的相互作用非常强，以至于简单的单粒子图像无法描述其行为的材料。这些系统常表现出奇特的量子现象，如高温超导。', category: '前沿研究', externalLink: 'https://zh.wikipedia.org/wiki/%E5%BC%BA%E5%85%B3%E8%81%94%E7%94%B5%E5%AD%90%E7%B3%BB%E7%BB%9F' },
            { id: '2d_materials', keyword: '二维材料', description: '二维材料是指只有一个原子层厚度的材料，如石墨烯、二硫化钼等。它们具有独特的电子、光学和机械性质，在纳米技术和新材料领域有广阔前景。', category: '前沿研究', externalLink: 'https://zh.wikipedia.org/wiki/%E4%BA%8C%E7%BB%B4%E6%9D%90%E6%96%99' },
            { id: 'graphene', keyword: '石墨烯', description: '石墨烯是单层碳原子以六边形蜂窝状结构排列的二维材料。它具有极高的导电性、导热性和机械强度，被誉为“神奇材料”。', category: '前沿研究', externalLink: 'https://zh.wikipedia.org/wiki/%E7%9F%B3%E5%A2%A8%E7%83%AF' },
            { id: 'topological_superconductor', keyword: '拓扑超导', description: '拓扑超导体是一种特殊的超导态，其表面或边缘可能存在马约拉纳费米子，这些准粒子有望用于构建容错量子计算机。', category: '前沿研究', externalLink: 'https://zh.wikipedia.org/wiki/%E6%8B%93%E6%89%91%E8%B6%85%E5%AF%BC%E4%BD%93' },
            { id: 'spintronics', keyword: '自旋电子学', description: '自旋电子学是利用电子的自旋（除了电荷之外的另一个基本属性）来存储、传输和处理信息的新兴技术。它有望带来更低功耗、更快速度的电子器件。', category: '前沿研究', externalLink: 'https://zh.wikipedia.org/wiki/%E8%87%AA%E6%97%8B%E7%94%B5%E5%AD%90%E5%AD%A6' },
        ];

        // --- Card Generation ---
        function createCards() {
            const totalCards = roomKeywords.length;
            const cardWidth = 200; // px (Desktop)
            const cardHeight = 300; // px (Desktop)
            const initialOverlapY = 0.8; // Vertical overlap in stacked state
            const initialRotationZ = 0.5; // Degree rotation for initial fanned stack

            // Desktop Fanning Parameters
            const fanSpreadFactorDesktop = 0.8; // Horizontal spread per card (e.g., 0.8 means 80% of card width separation)
            const maxFanRotationDesktop = 30; // Max rotation for the outermost card in fanned state (degrees)
            const fanArcHeightDesktop = 50; // Max vertical displacement for arc effect in fanned state (px)

            // Mobile Fanning Parameters (Vertical Cascade)
            const fanSpreadXMobile = 30; // Small horizontal offset per card for mobile
            const fanSpreadYMobile = 45; // Significant vertical offset per card for mobile
            const maxFanRotationMobile = 5; // Very slight rotation for mobile

            const fanDelayPerCard = 0.03; // Staggered delay for animation (seconds)

            // Calculate center index for balanced fanning
            const centerIndex = (totalCards - 1) / 2;

            roomKeywords.forEach((cardData, index) => {
                const cardElement = document.createElement('div');
                cardElement.classList.add('card');

                // Initial stacked position (slightly fanned)
                const initialY = index * initialOverlapY;
                const initialRot = (index - centerIndex) * initialRotationZ;
                const initialZ = index + 1; // Ensure correct stacking order

                cardElement.style.setProperty('--initial-y', `${initialY}px`);
                cardElement.style.setProperty('--initial-rot', `${initialRot}deg`);
                cardElement.style.setProperty('--initial-z', `${initialZ}`);

                // --- Desktop Fanning Calculations ---
                const normalizedIndex = index - centerIndex; // -N/2 to +N/2

                const fanXDesktop = normalizedIndex * cardWidth * fanSpreadFactorDesktop;
                const fanRotDesktop = normalizedIndex * (maxFanRotationDesktop / centerIndex);
                const fanYDesktop = -Math.abs(normalizedIndex) * fanArcHeightDesktop / centerIndex;
                const fanZDesktop = 100 + Math.abs(Math.round(normalizedIndex)); // Ensure distinct z-index for fanned state

                cardElement.style.setProperty('--fan-x', `${fanXDesktop}px`);
                cardElement.style.setProperty('--fan-y', `${fanYDesktop}px`);
                cardElement.style.setProperty('--fan-rot', `${fanRotDesktop}deg`);
                cardElement.style.setProperty('--fan-z', `${fanZDesktop}`); // Z-index for desktop fanning

                // --- Mobile Fanning Calculations (Vertical Cascade) ---
                const fanXMobileCalc = normalizedIndex * fanSpreadXMobile;
                const fanYMobileCalc = index * fanSpreadYMobile; // Stack downwards
                const fanRotMobileCalc = normalizedIndex * (maxFanRotationMobile / centerIndex);
                const fanZMobileCalc = index + 100; // Ensure distinct z-index for mobile fanning, maintaining order

                cardElement.style.setProperty('--fan-x-mobile', `${fanXMobileCalc}px`);
                cardElement.style.setProperty('--fan-y-mobile', `${fanYMobileCalc}px`);
                cardElement.style.setProperty('--fan-rot-mobile', `${fanRotMobileCalc}deg`);

                cardElement.style.setProperty('--delay', `${index * fanDelayPerCard}s`);


                cardElement.innerHTML = `
                    <div class="card-keyword">${cardData.keyword}</div>
                    <div class="card-category">${cardData.category}</div>
                `;

                // Store data directly on the element for easy access
                cardElement.dataset.cardData = JSON.stringify(cardData);

                cardElement.addEventListener('click', () => {
                    const data = JSON.parse(cardElement.dataset.cardData);
                    showModal(data);
                });

                cardStackContainer.appendChild(cardElement);
            });
        }

        /**
         * Shows the modal with content from the clicked card.
         * @param {object} card - The card object containing keyword, description, and externalLink.
         */
        function showModal(card) {
            modalTitle.innerHTML = card.keyword;
            modalBody.innerHTML = `<p>${card.description}</p>`;
            infoModal.classList.add('show');

            // Set the "Learn More" button's action
            learnMoreButton.onclick = () => {
                if (card.externalLink) {
                    window.open(card.externalLink, '_blank'); // Open in new tab
                } else {
                    console.warn("此关键词未定义外部链接。");
                }
                // Do not hide modal immediately, allow user to see the new tab opening
            };
        }

        /**
         * Hides the modal.
         */
        function hideModal() {
            infoModal.classList.remove('show');
        }

        // --- Initial Setup on Window Load ---
        window.onload = function() {
            createCards(); // Generate and display the cards
        };

        // --- Modal Event Listeners ---
        closeModalButton.addEventListener('click', hideModal);
        infoModal.addEventListener('click', (event) => {
            // Close modal if clicked outside the content area
            if (event.target === infoModal) {
                hideModal();
            }
        });
    </script>
</body>
</html>
