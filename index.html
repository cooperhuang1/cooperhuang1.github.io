<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>太阳系边际探测：在线演示文稿</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <style>
        /* Base Styles - Dark Theme */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            background-color: #0f172a; /* Deep space background */
            color: #e2e8f0; /* Light text for contrast */
            line-height: 1.6;
            overflow: hidden; /* Hide scrollbars for presentation mode */
            display: flex;
            flex-direction: column;
            height: 100vh; /* Full viewport height */
        }
        .section-title {
            color: #818cf8; /* Vibrant purple-blue for titles */
            text-shadow: 0 0 8px rgba(129, 140, 248, 0.5); /* Subtle glow */
        }
        .card {
            background-color: #1a202c; /* Darker card background */
            border-radius: 0.75rem; /* More rounded corners */
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1); /* Stronger shadow */
            border: 1px solid rgba(129, 140, 248, 0.2); /* Subtle border glow */
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 25px -5px rgba(0, 0, 0, 0.3), 0 6px 10px -3px rgba(0, 0, 0, 0.15);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .tab-button {
            padding: 0.75rem 1.5rem;
            margin: 0.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s, transform 0.2s, box-shadow 0.3s;
            background-color: #334155; /* Dark grey */
            color: #cbd5e1; /* Light grey text */
            font-weight: 600;
            border: 1px solid #475569;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .tab-button:hover {
            background-color: #475569;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        .tab-button.active {
            background-color: #818cf8; /* Vibrant purple-blue */
            color: #ffffff;
            border-color: #a78bfa;
            box-shadow: 0 4px 10px rgba(129, 140, 248, 0.4);
            transform: translateY(0);
        }
        .timeline {
            position: relative;
            padding-left: 2.5rem; /* More space for icons */
            border-left: 3px solid #6366f1; /* Stronger timeline line */
        }
        .timeline-item {
            position: relative;
            margin-bottom: 2.5rem;
            padding: 1rem 1.5rem;
            background-color: #2d3748; /* Darker item background */
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            border: 1px solid rgba(99, 102, 241, 0.3);
        }
        .timeline-item:hover {
            background-color: #3a475a; /* Slightly lighter on hover */
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
        }
        .timeline-icon {
            position: absolute;
            left: -1.75rem; /* Adjust position to align with line */
            top: 0.75rem;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            background-color: #6366f1; /* Purple-blue icon background */
            border: 3px solid #0f172a; /* Matches body background */
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
            z-index: 10;
            box-shadow: 0 0 10px rgba(99, 102, 241, 0.6); /* Glow effect */
        }
        .boundary-card {
            border: 1px solid rgba(129, 140, 248, 0.3);
            background-color: #1f2937; /* Darker background for boundary cards */
            color: #cbd5e1;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, border-color 0.2s;
        }
        .boundary-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.15);
            border-color: #818cf8; /* Glow on hover */
        }
        .boundary-card h3 {
            color: #a78bfa; /* Lighter purple for titles */
        }
        .nav-link {
            padding: 0.5rem 1rem;
            color: #cbd5e1;
            font-weight: 500;
            transition: color 0.3s, text-shadow 0.3s;
        }
        .nav-link:hover, .nav-link.active {
            color: #818cf8;
            text-shadow: 0 0 5px rgba(129, 140, 248, 0.7);
        }
        .chartjs-tooltip {
            background: rgba(30, 41, 59, 0.9); /* Darker tooltip */
            color: white;
            border-radius: 0.375rem;
            padding: 0.5rem;
            font-size: 0.875rem;
            border: 1px solid rgba(129, 140, 248, 0.3);
        }
        .llm-button {
            background: linear-gradient(45deg, #6366f1, #818cf8); /* Gradient button */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            box-shadow: 0 4px 8px rgba(99, 102, 241, 0.4);
            border: none;
        }
        .llm-button:hover:not(:disabled) {
            background: linear-gradient(45deg, #4f46e5, #6d28d9); /* Darker gradient on hover */
            box-shadow: 0 6px 12px rgba(99, 102, 241, 0.6);
            transform: translateY(-2px);
        }
        .llm-button:disabled {
            background-color: #475569;
            cursor: not-allowed;
            box-shadow: none;
        }
        .llm-textarea {
            width: 100%;
            padding: 0.75rem;
            border-radius: 0.375rem;
            background-color: #2d3748; /* Darker input */
            border: 1px solid #475569;
            color: #e2e8f0;
            resize: vertical;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }
        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #ffffff;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .planet-indicator {
            position: absolute;
            top: -5px; /* Adjust for larger size */
            height: 20px;
            width: 20px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid #0f172a; /* Matches body background */
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5); /* Stronger glow */
            transform: scale(0);
            opacity: 0;
            transition: transform 0.4s ease-out, opacity 0.4s ease-out, box-shadow 0.4s ease-out;
            transform-origin: center center;
        }
        .planet-indicator.animate-in {
            transform: scale(1);
            opacity: 1;
        }
        .planet-indicator:hover {
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
            transform: scale(1.2);
        }
        .planet-card-item {
            border: 1px solid #475569;
            border-radius: 0.5rem;
            background-color: #1f2937;
            padding: 1.25rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            color: #cbd5e1;
        }
        .planet-card-item h2 {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #a78bfa;
        }
        .planet-card-item p {
            font-size: 0.9rem;
            color: #94a3b8;
        }
        .planet-modal-content {
            padding: 1.5rem;
            background-color: #1f2937;
            color: #e2e8f0;
            border-radius: 0.5rem;
        }
        .planet-modal-content p {
            margin-bottom: 0.75rem;
        }

        /* Solar System Multiple Boundaries Diagram */
        .boundary-diagram-wrapper {
            overflow-x: auto;
            padding-bottom: 1.5rem;
        }
        .boundary-diagram-container {
            position: relative;
            width: 100%;
            min-width: 900px; /* Increased min-width */
            height: 280px; /* Increased height */
            background: linear-gradient(to right, #1f2937, #2d3748, #334155, #475569, #64748b); /* Darker, more subtle gradient */
            border-radius: 0.75rem;
            display: flex;
            align-items: flex-end;
            padding: 0 1.5rem;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.4);
            border: 1px solid rgba(129, 140, 248, 0.2);
        }
        .boundary-segment {
            flex: 1;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            text-align: center;
            padding: 0.75rem;
            color: #e2e8f0;
            font-size: 0.9rem;
            font-weight: 500;
            opacity: 0.9;
            box-sizing: border-box;
            min-width: 140px; /* Increased min-width */
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out, background-color 0.3s;
            border-radius: 0.5rem;
            margin: 0.25rem; /* Small margin between segments */
        }
        .boundary-segment:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 20px rgba(0,0,0,0.4);
            background-color: rgba(129, 140, 248, 0.1); /* Subtle highlight on hover */
        }
        .boundary-segment strong {
            font-weight: 700;
            color: #a78bfa; /* Purple for strong text */
            margin-bottom: 0.5rem;
            line-height: 1.3;
            font-size: 1.25rem;
            text-shadow: 0 0 5px rgba(167, 139, 250, 0.5);
        }
        .boundary-segment .visual-cue {
            font-size: 3.5rem; /* Larger emoji */
            line-height: 1;
            margin-bottom: 0.75rem;
            display: block;
            color: #60a5fa; /* Blue for cues */
            text-shadow: 0 0 10px rgba(96, 165, 250, 0.7);
        }
        .boundary-segment-label {
            white-space: normal;
            font-size: 0.8rem;
            color: #94a3b8;
            line-height: 1.3;
            margin-top: auto;
        }
        /* Specific background colors for visual distinction (more subtle) */
        .boundary-segment:nth-child(1) { background-color: rgba(251, 191, 36, 0.05); }
        .boundary-segment:nth-child(2) { background-color: rgba(52, 211, 153, 0.05); }
        .boundary-segment:nth-child(3) { background-color: rgba(59, 130, 246, 0.05); }
        .boundary-segment:nth-child(4) { background-color: rgba(239, 68, 68, 0.05); }
        .boundary-segment:nth-child(5) { background-color: rgba(99, 102, 241, 0.05); }
        .boundary-segment:nth-child(6) { background-color: rgba(168, 85, 247, 0.05); }

        /* Styles for Voyager Timeline Detail */
        #voyagerDetailArea {
            background-color: #1f2937;
            border: 1px solid #475569;
            border-radius: 0.75rem;
            padding: 2rem;
            margin-top: 2rem;
            display: none;
            box-shadow: inset 0 0 10px rgba(129, 140, 248, 0.2);
            color: #e2e8f0;
        }
        #voyagerDetailArea h3 {
            font-size: 1.75rem;
            font-weight: 700;
            color: #a78bfa;
            margin-bottom: 1rem;
            text-shadow: 0 0 5px rgba(167, 139, 250, 0.5);
        }
        #voyagerDetailArea p {
            color: #cbd5e1;
            margin-bottom: 0.75rem;
        }
        #voyagerDetailArea ul {
            list-style: disc;
            list-style-position: inside;
            margin-left: 1.5rem;
            color: #cbd5e1;
        }
        #voyagerDetailArea ul li {
            margin-bottom: 0.5rem;
        }
        #voyagerDetailArea h4 {
            color: #60a5fa;
            text-shadow: 0 0 3px rgba(96, 165, 250, 0.3);
        }

        /* 3D Canvas Styles */
        .three-d-canvas {
            width: 100%;
            height: 400px; /* Fixed height for 3D canvas */
            background-color: #000;
            border-radius: 0.75rem;
            border: 1px solid rgba(129, 140, 248, 0.2);
            box-shadow: inset 0 0 15px rgba(0,0,0,0.4);
            margin-top: 2rem;
        }

        /* Nuclear Power 3D Visualizations */
        .nuclear-power-canvas {
            width: 100%;
            height: 250px;
            background-color: #000;
            border-radius: 0.75rem;
            border: 1px solid rgba(71, 85, 105, 0.3);
            box-shadow: inset 0 0 8px rgba(0,0,0,0.3);
            margin-top: 1.5rem;
        }

        /* --- Presentation Mode Styles --- */
        .presentation-container {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100vw;
            height: calc(100vh - 80px); /* Adjust for header/footer */
            overflow: hidden; /* Hide scrollbars within slides */
            position: relative;
        }

        .slide {
            width: 100%;
            height: 100%;
            display: none; /* Hidden by default */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem 4rem; /* More padding for presentation */
            box-sizing: border-box;
            position: absolute; /* For overlaying slides during transition */
            top: 0;
            left: 0;
            opacity: 0;
            transform: translateX(100%); /* Start off-screen to the right by default */
            transition: opacity 0.7s ease-out, transform 0.7s ease-out; /* Smooth transition */
            overflow-y: auto; /* Allow internal scrolling if content overflows */
        }

        .slide.active {
            display: flex;
            opacity: 1;
            transform: translateX(0%); /* Slide into view */
        }

        /* Initial state for slides coming from left (previous button) */
        .slide.from-left {
            transform: translateX(-100%);
        }

        /* State for slides leaving to the left (next button) */
        .slide.to-left {
            transform: translateX(-100%);
            opacity: 0;
        }

        /* State for slides leaving to the right (previous button) */
        .slide.to-right {
            transform: translateX(100%);
            opacity: 0;
        }


        .slide .card {
            width: 100%;
            max-width: 1200px; /* Limit card width for better readability */
            height: auto;
            max-height: 100%; /* Ensure card fits within slide */
            overflow-y: auto; /* Allow internal scrolling if card content overflows */
            padding: 2rem;
        }

        .slide-navigation {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #1a202c; /* Darker background for nav */
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.3);
            z-index: 100;
        }

        .slide-button {
            background-color: #6366f1;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.2s;
            border: none;
        }
        .slide-button:hover:not(:disabled) {
            background-color: #4f46e5;
            transform: translateY(-2px);
        }
        .slide-button:disabled {
            background-color: #334155;
            cursor: not-allowed;
        }
        .slide-indicator {
            color: #cbd5e1;
            font-weight: 500;
            font-size: 1.1rem;
        }

        /* Adjust header for presentation mode */
        header.presentation-header {
            background-color: #0f172a;
            padding: 1rem 2rem;
            text-align: center;
            color: #e2e8f0;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 100;
        }
        .presentation-header .title {
            color: #818cf8;
            text-shadow: 0 0 8px rgba(129, 140, 248, 0.5);
        }

        /* Hide original nav and footer in presentation mode */
        nav, footer {
            display: none;
        }

        /* Specific slide adjustments for better layout */
        #slide-title .card {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 80vh; /* Make title card fill more space */
        }
        #slide-title h1 {
            font-size: 4.5rem; /* Larger title */
            line-height: 1.2;
            margin-bottom: 1rem;
        }
        #slide-title p {
            font-size: 2.2rem; /* Larger subtitle */
            margin-bottom: 2rem;
        }
        #slide-title .author-info {
            font-size: 1.5rem;
            color: #94a3b8;
        }

        #slide-pioneers-voyager .timeline, #slide-pioneers-new-horizons .timeline {
            max-width: 100%; /* Allow timeline to expand */
        }
        #slide-pioneers-voyager .grid, #slide-pioneers-new-horizons .grid {
            grid-template-columns: 1fr; /* Stack content for better readability on slides */
        }
        #slide-pioneers-voyager .grid > div, #slide-pioneers-new-horizons .grid > div {
            margin-bottom: 2rem;
        }
        .image-placeholder {
            width: 100%;
            height: 250px;
            background-color: #2d3748;
            border: 1px dashed #475569;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #cbd5e1;
            font-size: 1.1rem;
            text-align: center;
            border-radius: 0.5rem;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
        }
    </style>
</head>
<body>

    <header class="presentation-header">
        <div class="title">太阳系边际探测：在线演示文稿</div>
    </header>

    <div class="presentation-container" id="presentationContainer">
        <div class="slide active" id="slide-title">
            <div class="card text-center">
                <h1 class="font-extrabold section-title mb-4">太阳系边际探测：探索与展望</h1>
                <p class="text-3xl text-slate-300 mb-8 max-w-4xl mx-auto">
                    揭示宇宙家园的终极边界
                </p>
                <div class="author-info text-slate-400">
                    <p>主讲人：黄俊鑫 孙导航</p>
                    <p>日期：2025 8 </p>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-blueprint">
            <div class="card text-center">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-8">宏伟蓝图：界定太阳系的边际</h2>
                <p class="text-xl text-slate-300 mb-10 max-w-4xl mx-auto">
                    人类对宇宙的探索，始于对家园边界的求索。太阳系的边界并非单一界线，而是由多种物理现象定义的多层次区域，每一层都揭示了太阳系演化历史的不同篇章。
                </p>
                <div class="p-8 border border-blue-700 rounded-xl bg-gray-800 shadow-xl">
                    <h3 class="text-2xl font-semibold text-blue-400 mb-6">交互式3D太阳系模型</h3>
                    <canvas id="solarSystem3DCanvas" class="three-d-canvas"></canvas>
                    <p class="mt-4 text-base text-slate-400 text-center">使用鼠标拖动旋转模型，滚轮缩放，感受太阳系的浩瀚。</p>
                </div>
            </div>
        </div>

       <div class="slide" id="slide-boundaries-overview">
    <div class="card text-center">
        <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-8">太阳系边界概述：多层次的宇宙疆域</h2>
        <p class="text-xl text-slate-300 mb-10 max-w-4xl mx-auto">
            太阳系的边界是一个动态且多层次的区域，从行星轨道延伸至遥远的星际空间，每一层都蕴含着独特的科学奥秘。
        </p>
        <div class="boundary-diagram-wrapper">
            <div class="boundary-diagram-container">
                <div class="boundary-segment">
                    <span class="visual-cue">◎</span> <strong>行星轨道</strong>
                    <span class="boundary-segment-label">0.4 - 30 AU</span>
                </div>
                <div class="boundary-segment">
                    <span class="visual-cue">✶</span> <strong>柯伊伯带</strong>
                    <span class="boundary-segment-label">30 - 1,000 AU</span>
                </div>
                <div class="boundary-segment">
                    <span class="visual-cue">☊</span> <strong>日球层顶</strong>
                    <span class="boundary-segment-label">~120 - 140 AU</span>
                </div>
                <div class="boundary-segment">
                    <span class="visual-cue">♨</span> <strong>热墙</strong>
                    <span class="boundary-segment-label">~200 AU</span>
                </div>
                <div class="boundary-segment">
                    <span class="visual-cue">☄</span> <strong>奥尔特云</strong>
                    <span class="boundary-segment-label">3,000 - 100,000 AU</span>
                </div>
                <div class="boundary-segment">
                    <span class="visual-cue">♁</span> <strong>引力边界</strong>
                    <span class="boundary-segment-label">~100,000 AU</span>
                </div>
            </div>
        </div>
        <p class="mt-6 text-base text-slate-400 text-center">图示：太阳系多层次边界，从内行星轨道到遥远引力边界。</p>
        <img src="images/太阳系边界示意图.png"
            alt="太阳系边界示意图，展示日球层、柯伊伯带和奥尔特云的艺术概念图"
            class="w-full h-auto rounded-lg shadow-lg mt-4 mb-4 object-cover"
            onerror="this.onerror=null;this.src='https://placehold.co/600x400/2d3748/cbd5e1?text=图片加载失败';">
</div>

        <div class="slide" id="slide-kuiper-belt">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">柯伊伯带：冰冻的遗迹与行星起源</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">核心特征</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>距离:</strong> 30 - 1,000 AU (天文单位)，延伸至近1000 AU。</li>
                            <li><strong>组成:</strong> 主要由冰（水冰、甲烷冰、氨冰）和岩石构成。</li>
                            <li><strong>天体:</strong> 包含数百万个柯伊伯带天体 (KBOs)，包括冥王星、阋神星等矮行星。</li>
                            <li><strong>结构:</strong> 呈厚实的圆盘状，包含“冷”和“热”经典KBOs以及散射盘天体。</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">科学意义</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>早期太阳系残余:</strong> 被认为是太阳系形成初期的“遗留物”，保存了原始星子的信息。</li>
                            <li><strong>行星形成研究:</strong> 研究其组成与轨道，有助于理解行星系统如何从原始星云中形成和演化。</li>
                            <li><strong>彗星起源:</strong> 是许多短周期彗星的来源地。</li>
                        </ul>
                        <div class="image-placeholder">
                            [Image: jpg2 - 柯伊伯带天体（如冥王星）的艺术概念图，强调其冰冷和遥远]
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-heliosphere">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">日球层：太阳风的疆域与宇宙护盾</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">核心概念</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>定义:</strong> 太阳风在星际介质中吹出的巨大“气泡”，保护内部行星。</li>
                            <li><strong>日球层顶:</strong> 太阳风压力与星际介质压力相等的边界，约123 - 140 AU。</li>
                            <li><strong>结构:</strong> 包含终端激波（太阳风减速处）和日鞘（终端激波与日球层顶之间的区域）。</li>
                        </ul>
                        <div class="image-placeholder">
                            [Image: jpg3 - 太阳风与星际介质相互作用的艺术概念图，展示日球层保护作用]
                        </div>
                    </div>
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">科学意义与防护作用</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>宇宙射线防护:</strong> 偏转和调制有害的银河宇宙射线（GCRs），对地球生命的宜居性至关重要。</li>
                            <li><strong>太阳系与星际介质互动:</strong> 理解太阳系如何与星际介质相互作用，以及太阳风的影响范围。</li>
                        </ul>
                        <div class="chart-container mx-auto h-72 md:h-80 bg-gray-800 p-4 rounded-lg shadow-inner">
                            <canvas id="heliosphereProtectionChart"></canvas>
                        </div>
                        <p class="text-base text-slate-400 mt-4 text-center">图表（示意数据）：日球层对不同能量宇宙射线的过滤效果。</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-oort-ism">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">奥尔特云与星际介质：太阳系最遥远的疆域</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">奥尔特云：彗星的摇篮</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>距离:</strong> 3,000 - 100,000 AU，甚至可能达到200,000 AU。</li>
                            <li><strong>组成:</strong> 理论上存在的冰冷天体球状壳层，是长周期彗星和哈雷型彗星的来源。</li>
                            <li><strong>科学意义:</strong> 提供关于太阳系早期物质分布、行星迁移历史以及彗星来源的宝贵线索。</li>
                        </ul>
                        <div class="image-placeholder">
                            [Image: jpg4 - 奥尔特云的艺术概念图，展示遥远的冰质天体环绕太阳系]
                        </div>
                    </div>
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">局部星际介质 (ISM)：太阳系外的宇宙环境</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>位置:</strong> 位于日球层之外 (>140 AU)。</li>
                            <li><strong>组成:</strong> 主要由氢、氦、尘埃和宇宙射线构成。</li>
                            <li><strong>科学意义:</strong> 理解太阳系的“空间天气”及其在银河系中的长期演化，恒星在其最致密的区域内形成。</li>
                        </ul>
                        <h3 class="text-3xl font-semibold text-blue-400 mt-8 mb-6">热墙：日球层外的加热区域</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>距离:</strong> 约 200 AU。</li>
                            <li><strong>特征:</strong> 由被太阳风弓形激波加热的星际氢原子形成的区域。</li>
                            <li><strong>科学意义:</strong> 理解星际氢原子如何穿透日球层并影响其内部环境。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-scaled-map">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-8 text-center">比例尺太阳系地图：感受浩瀚距离</h2>
                <p class="text-xl text-slate-300 mb-10 text-center max-w-4xl mx-auto">
                    以成都理工大学校园为参照，直观感受太阳系天体的浩瀚距离。假设太阳直径1米，位于E1B215教室。<br>
                    <span class="text-base text-slate-400">（请注意：由于太阳系尺度的巨大差异，内行星在比例尺上会非常靠近太阳。）</span>
                </p>
                <div class="flex flex-col items-center p-8 space-y-8 bg-gray-800 rounded-xl border border-blue-700 shadow-xl">
                    <h1 class="text-3xl font-bold text-blue-400">成都理工大学比例尺太阳系</h1>
                    <p class="text-lg text-slate-400">1米直径太阳位于E1B215教室</p>
                    <div class="w-full overflow-x-auto pb-6">
                        <div class="relative h-3 bg-gradient-to-r from-yellow-400 via-blue-400 to-gray-300 rounded-full shadow-inner" style="width: 10000px;" id="solarSystemProgressBar">
                        </div>
                    </div>
                    <div id="planetCardsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full">
                        </div>
                </div>
            </div>

            <div id="planetDetailModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center hidden z-50">
                <div class="relative mx-auto p-8 border w-11/12 md:w-1/3 shadow-lg rounded-xl bg-gray-900">
                    <div class="mt-3 text-center">
                        <h3 id="planetModalTitle" class="text-3xl leading-6 font-medium text-blue-400 mb-4"></h3>
                        <div id="planetModalContent" class="mt-4 px-7 py-3 text-left planet-modal-content">
                            </div>
                        <div class="items-center px-4 py-3">
                            <button id="closePlanetModalButton" class="llm-button w-full">
                                关闭
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-mysteries-origin">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">科学奥秘：太阳系的起源与演化</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start">
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">柯伊伯带：原始遗迹与行星形成</h3>
                        <p class="text-lg text-slate-300 mb-4">柯伊伯带被认为是太阳系形成初期的“遗留物”，其冰冷天体是原始星子。研究KBOs的组成、轨道和相互作用，有助于我们理解行星系统如何从原始星云中形成和演化，以及彗星的起源。</p>
                        <ul class="list-disc list-inside text-slate-300 space-y-2 mt-4 pl-4 text-lg">
                            <li><strong>天体多样性:</strong> 包含“冷”经典KBOs（轨道相对圆形）和“热”经典KBOs（轨道更椭圆），以及散射盘天体。</li>
                            <li><strong>引力扰动证据:</strong> 冥王星与海王星的3:2轨道共振，是行星迁移和引力相互作用的直接证据。</li>
                        </ul>
                        <div class="image-placeholder">
                            [Image: jpg13 - 原始星云形成太阳系的艺术概念图，强调尘埃和气体盘]
                        </div>
                        <p class="text-base text-slate-400 text-center mt-3">图：太阳系形成早期示意图</p>
                    </div>
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">奥尔特云：彗星的摇篮与星系潮汐力</h3>
                        <p class="text-lg text-slate-300 mb-4">奥尔特云中的天体可能形成于太阳系内侧，随后被巨行星的引力抛射到遥远的外部区域。这些冰质天体是长周期彗星的来源，它们在星系潮汐力的影响下偶尔被推向太阳系内部。</p>
                        <ul class="list-disc list-inside text-slate-300 space-y-2 mt-4 pl-4 text-lg">
                            <li><strong>彗星起源:</strong> 对奥尔特云的探测将提供关于太阳系早期物质分布和行星迁移过程的宝贵线索。</li>
                            <li><strong>无法直接观测:</strong> 其存在通过数学模型和彗星观测得到预测。</li>
                        </ul>
                        <h3 class="text-3xl font-semibold text-blue-400 mt-8 mb-6">巨行星形成过程的启示</h3>
                        <p class="text-lg text-slate-300 mb-4">外太阳系的巨行星在“冰线”之外形成，它们强大引力吸积了大量气体。研究这些行星的形成过程，有助于我们理解太阳系内部和外部行星组成差异的原因。</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-mysteries-life">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">科学奥秘：宇宙生命与宜居性探索</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start">
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">日球层：地球生命的宇宙盾牌</h3>
                        <p class="text-lg text-slate-300 mb-4">日球层是太阳系对抗来自星际空间的高速带电粒子（银河宇宙射线，GCRs）的巨大保护罩。太阳风及其携带的磁场能够偏转和调制这些有害辐射，从而保护内部行星的生命。</p>
                        <ul class="list-disc list-inside text-slate-300 space-y-2 mt-4 pl-4 text-lg">
                            <li><strong>宜居性关键:</strong> 对于没有磁场的行星（如火星和金星），日球层的防护作用尤为关键。</li>
                            <li><strong>GCRs过滤:</strong> 日球层对宇宙射线的过滤作用，直接影响了太阳系内部的辐射环境。</li>
                        </ul>
                        <div class="chart-container mx-auto h-72 md:h-80 bg-gray-800 p-4 rounded-lg shadow-inner">
                            <canvas id="heliosphereProtectionChart"></canvas>
                        </div>
                        <p class="text-base text-slate-400 mt-4 text-center">图表（示意数据）：日球层对不同能量宇宙射线的过滤效果。</p>
                    </div>
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">外太阳系冰卫星的生命潜力</h3>
                        <p class="text-lg text-slate-300 mb-4">尽管外太阳系温度极低，但对木星和土星卫星（如木卫二欧罗巴、土卫六泰坦）的探测发现，它们可能拥有冰层下的液态海洋，甚至具备原始生命的条件。这些发现极大地拓展了我们对生命宜居区域的理解。</p>
                        <div class="image-placeholder">
                            [Image: jpg14 - 木卫二欧罗巴冰下海洋的艺术概念图，强调潜在的生命环境]
                        </div>
                        <p class="text-base text-slate-400 text-center mt-3">图：木卫二欧罗巴冰下海洋概念图</p>
                        <h3 class="text-3xl font-semibold text-blue-400 mt-8 mb-6">生命起源的宇宙线索</h3>
                        <p class="text-lg text-slate-300">在星际云和外太阳系天体表面发现了复杂的有机分子，这些是生命的基本化学组成部分。这表明生命的“原材料”在宇宙中可能普遍存在，为我们理解地球生命如何从简单的化学物质演化而来提供了更广阔的视角。</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-mysteries-ism">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">科学奥秘：星际介质的直接探测</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start">
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">日球层与星际介质的动态相互作用</h3>
                        <p class="text-lg text-slate-300 mb-4">日球层顶是太阳系与星际介质（ISM）直接相互作用的区域。探测这一边界能帮助我们理解太阳系如何穿越银河系，以及太阳风与来自其他恒星的气体、尘埃和宇宙射线如何相互作用。</p>
                        <ul class="list-disc list-inside text-slate-300 space-y-2 mt-4 pl-4 text-lg">
                            <li><strong>日球层形态:</strong> 相互作用塑造了日球层的形态，模型预测其形状从球形到彗星状，甚至羊角面包状。</li>
                            <li><strong>粒子流入:</strong> 磁重联等过程允许带电粒子从星际介质流入日球层，改变其内部环境。</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">对银河系化学演化与宇宙物质循环的洞察</h3>
                        <p class="text-lg text-slate-300 mb-4">直接测量星际介质的磁场、密度、温度、电离状态、元素和同位素组成，能够提供关于银河系物质起源、演化和循环的宝贵信息。</p>
                        <ul class="list-disc list-inside text-slate-300 space-y-2 mt-4 pl-4 text-lg">
                            <li><strong>恒星与星系生命周期:</strong> 有助于我们理解恒星和星系的生命周期，以及宇宙中重元素的形成过程。</li>
                            <li><strong>星际尘埃:</strong> 研究星际尘埃的组成，可以追溯其在银河系中的起源，深入了解构成天体的基本物质及其在恒星间的循环。</li>
                        </ul>
                        <div class="image-placeholder">
                            [Image: jpg15 - 银河系结构和星际云的艺术概念图]
                        </div>
                        <p class="text-base text-slate-400 text-center mt-3">图：银河系与星际介质概念图</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-mysteries-unanswered">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">未解之谜：前代任务留下的空白</h2>
                <div class="mt-12 p-8 bg-gray-800 rounded-xl border border-blue-700 shadow-xl">
                    <h3 class="text-3xl font-semibold text-blue-400 mb-6 text-center">现有空白与挑战：</h3>
                    <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                        <li><strong>旅行者号：</strong> 等离子体科学仪器失效，无法直接测量太阳风；未配备测量“拾取离子”（PUIs）的仪器，留下日球层如何抵抗星际风的谜团。</li>
                        <li><strong>新视野号：</strong> 仅穿越了柯伊伯带的一小部分，关于天体总数、碰撞状态以及离散天体起源的问题仍未解决。</li>
                        <li><strong>IBEX/IMAP：</strong> 作为轨道器，提供的是遥感数据，而非深空原位测量。</li>
                        <li><strong>奥尔特云：</strong> 形成、演化和确切组成在很大程度上仍停留在理论层面，缺乏直接观测数据。</li>
                        <li><strong>星际介质：</strong> 其组成和特性直接影响日球层的形状、大小和保护能力，但缺乏详细的原位测量。</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-next-gen-goals">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">下一代目标：深入探索太阳系边缘</h2>
                <div class="mt-12 p-8 bg-gray-800 rounded-xl border border-blue-700 shadow-xl">
                    <h3 class="text-3xl font-semibold text-blue-400 mb-6 text-center">下一代探测器的主要科学目标：</h3>
                    <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                        <li><strong>表征日球层：</strong> 确定其真实全球形状和大小，理解太阳风与星际介质的相互作用，研究粒子加速机制，并测量“拾取离子”。</li>
                        <li><strong>星际介质原位分析：：</strong> 表征局部星际介质的组成和性质，研究磁场相互作用，探测并表征星际尘埃。</li>
                        <li><strong>柯伊伯带与奥尔特云：：</strong> 更好地理解柯伊伯带尘埃量和天体总数，绘制黄道尘埃云，搜索离散源周围的尘埃云，确定柯伊伯带尘埃组成，调查尘埃转换区域，并解决奥尔特云的形成与演化之谜。</li>
                        <li><strong>粒子加速与辐射环境：：</strong> 量化深空中，特别是日球层之外的银河宇宙射线（GCRs）和太阳粒子事件（SPEs）的通量和能量水平。</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-earth-importance">
            <div class="card text-center">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-8">深空探索对地球的重要性</h2>
                <p class="text-xl text-slate-300 mb-10 max-w-4xl mx-auto">
                    深空探测不仅是探索未知，更是为了更好地理解和保护我们赖以生存的地球。
                </p>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-gray-800 rounded-xl shadow-xl text-left border border-blue-700">
                        <thead class="bg-blue-900">
                            <tr>
                                <th class="py-4 px-6 text-base font-semibold text-blue-300 uppercase tracking-wider rounded-tl-xl">重要性方面</th>
                                <th class="py-4 px-6 text-base font-semibold text-blue-300 uppercase tracking-wider rounded-tr-xl">简要说明</th>
                            </tr>
                        </thead>
                        <tbody id="importanceTableBody">
                            </tbody>
                    </table>
                </div>
                <p class="mt-6 text-base text-slate-400 text-center">
                    点击表格行查看更多详细信息。
                </p>
            </div>
            <div id="importanceDetailModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center hidden z-50">
                <div class="relative mx-auto p-8 border w-11/12 md:w-1/2 shadow-lg rounded-xl bg-gray-900">
                    <div class="mt-3 text-center">
                        <h3 id="importanceModalTitle" class="text-3xl leading-6 font-medium text-blue-400 mb-4"></h3>
                        <div id="importanceModalContent" class="mt-4 px-7 py-3 text-left text-slate-300"></div>
                        <div class="items-center px-4 py-3">
                            <button id="closeImportanceModalButton" class="llm-button w-full">
                                关闭
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-tech-communication">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">突破性技术：超远距离通信与数据传输 📡</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <p class="text-xl text-slate-300 mb-4">随着航天器远离地球，通信信号会急剧衰减，导致数据传输速率极低，例如新视野号从冥王星回传数据时，速率仅为1-2千比特/秒，信号延迟数小时。</p>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>光学通信（激光）：</strong> 利用激光束进行数据传输，数据速率可比传统无线电通信提高10到100倍，能量更集中。</li>
                            <li><strong>深空网络（DSN）：</strong> 全球分布的巨型地面天线网络，用于接收和发送深空探测器信号。</li>
                            <li><strong>分布式容错网络（DTN）：</strong> “存储-转发”网络协议，构建“太阳系互联网”，应对间歇性连接和长时间延迟。</li>
                            <li><strong>高精度时间同步技术：</strong> 实现皮秒级时间同步，补偿光速延迟和相对论效应。</li>
                            <li><strong>纠错码：</strong> 确保在信号微弱和干扰严重情况下数据传输的完整性。</li>
                        </ul>
                    </div>
                    <div>
                        <div class="image-placeholder">
                            [Image: jpg5 - 深空光通信激光束从航天器射向地球的艺术概念图，强调其细束和长距离]
                        </div>
                        <p class="text-base text-slate-400 text-center mt-3">图：深空光通信概念示意图</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-tech-energy">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">突破性技术：长寿命能源系统 ⚡</h2>
                <p class="text-xl text-slate-300 mb-4">在远离太阳的区域，太阳能效率低下。放射性同位素热电发生器（RTG）是首选，但面临功率衰减和燃料供应问题。</p>
                <div class="flex flex-wrap justify-center mb-8" id="systemTabs">
                    <button class="tab-button active" data-system="RTG">放射性同位素热电发生器 (RTG)</button>
                    <button class="tab-button" data-system="SRG">斯特林放射性同位素发生器 (SRG)</button>
                </div>

                <div id="systemContent">
                    <div class="content-box active p-8 bg-gray-800 rounded-xl border border-blue-700 shadow-inner" data-content="RTG">
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">放射性同位素热电发生器 (RTG)</h3>
                        <div class="visual-representation text-5xl mb-4">
                            ☢️ ➡️ 🔥 ➡️ ⚡
                        </div>
                        <canvas id="rtg3DCanvas" class="nuclear-power-canvas"></canvas>
                        <p class="text-lg text-slate-300 mb-4"><strong>基本原理：</strong> RTG利用放射性同位素（如钚-238）衰变过程中释放的热量，通过温差电效应直接转化为电能。</p>
                        <p class="key-points text-lg text-slate-300 mb-3"><strong>优势：：</strong> 长寿命、高可靠性、环境适应性强。</p>
                        <p class="disadvantages text-lg text-slate-300 mb-3"><strong>挑战/局限：：</strong> 功率有限且衰减、燃料稀缺与成本、放射性风险。</p>
                    </div>

                    <div class="content-box hidden p-8 bg-gray-800 rounded-xl border border-blue-700 shadow-inner" data-content="SRG">
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">斯特林放射性同位素发生器 (SRG)</h3>
                        <div class="visual-representation text-5xl mb-4">
                            ☢️ ➡️ 🔥 ➡️ ⚙️ ➡️ ⚡
                        </div>
                        <canvas id="srg3DCanvas" class="nuclear-power-canvas"></canvas>
                        <p class="text-lg text-slate-300 mb-4"><strong>基本原理：</strong> SRG利用放射性同位素衰变的热量驱动斯特林发动机将热能转化为机械能，再由线性发电机转化为电能。</p>
                        <p class="key-points text-lg text-slate-300 mb-3"><strong>优势：：</strong> 高效率（可达RTG的四倍）、延长任务寿命/支持更多仪器、振动小。</p>
                        <p class="disadvantages text-lg text-slate-300 mb-3"><strong>挑战/局限：：</strong> 技术复杂性、可靠性验证、放射性风险。</p>
                    </div>
                </div>
                <div class="image-placeholder">
                    [Image: jpg6 - 放射性同位素热电发生器（RTG）的实物图或模型图，展示其紧凑结构]
                </div>
            </div>
        </div>

        <div class="slide" id="slide-tech-propulsion">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">突破性技术：先进推进系统 🚀</h2>
                <p class="text-xl text-slate-300 mb-4">深空探测需要更高效、更快速的推进方式来克服巨大的距离。</p>
                <div class="flex flex-wrap justify-center mb-8" id="propulsionTabs">
                    <button class="tab-button active" data-system="NTP">核热推进 (NTP)</button>
                    <button class="tab-button" data-system="NEP">核电推进 (NEP)</button>
                    <button class="tab-button" data-system="SolarSail">太阳帆</button>
                </div>

                <div id="propulsionContent">
                    <div class="content-box active p-8 bg-gray-800 rounded-xl border border-blue-700 shadow-inner" data-content="NTP">
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">核热推进 (NTP)</h3>
                        <div class="visual-representation text-5xl mb-4">
                            ⚛️ ➡️ 🔥 ➕ 💧 ➡️ 💨 ➡️ 🚀
                        </div>
                        <canvas id="ntp3DCanvas" class="nuclear-power-canvas"></canvas>
                        <p class="text-lg text-slate-300 mb-4"><strong>基本原理：</strong> 利用核反应堆产生的高温加热液态推进剂（通常是液氢），使其膨胀成高温高压气体并高速喷出，产生巨大推力。</p>
                        <p class="key-points text-lg text-slate-300 mb-3"><strong>优势：：</strong> 比冲是化学火箭的两倍，显著缩短深空旅行时间，推力大。</p>
                        <p class="disadvantages text-lg text-slate-300 mb-3"><strong>挑战/局限：：</strong> 技术复杂性、安全性、液氢储存。</p>
                    </div>

                    <div class="content-box hidden p-8 bg-gray-800 rounded-xl border border-blue-700 shadow-inner" data-content="NEP">
                        <h3>核电推进 (NEP)</h3>
                        <div class="visual-representation text-5xl mb-4">
                            ⚛️ ➡️ ⚡ ➕ 💨 ➡️ ✨ ➡️ 🚀
                        </div>
                        <canvas id="nep3DCanvas" class="nuclear-power-canvas"></canvas>
                        <p class="text-lg text-slate-300 mb-4"><strong>基本原理：：</strong> 核反应堆发电，电力用于驱动电推力器（如离子推力器），通过电离惰性气体并加速离子产生推力。</p>
                        <p class="key-points text-lg text-slate-300 mb-3"><strong>优势：：：</strong> 极高比冲（燃料效率极高），能够长时间持续加速达到极高速度，强大电力可支持多任务。</p>
                        <p class="disadvantages text-lg text-slate-300 mb-3"><strong>挑战/局限：：：</strong> 推力小（不适合快速离轨），需要高效紧凑的反应堆和电力系统，安全性。</p>
                    </div>

                    <div class="content-box hidden p-8 bg-gray-800 rounded-xl border border-blue-700 shadow-inner" data-content="SolarSail">
                        <h3>太阳帆 (Solar Sail)</h3>
                        <div class="visual-representation text-5xl mb-4">
                            ☀️ ➡️ 💨 ➡️ 🚀
                        </div>
                        <div class="image-placeholder" style="height: 200px;">
                            [Image: jpg7 - 展开的太阳帆航天器的艺术概念图，展示其巨大的薄膜]
                        </div>
                        <p class="text-lg text-slate-300 mb-4"><strong>基本原理：：</strong> 利用太阳光子撞击巨型薄膜产生的微小光压来加速航天器，无需携带燃料。</p>
                        <p class="key-points text-lg text-slate-300 mb-3"><strong>优势：：：</strong> 无需燃料，理论上可无限加速（只要有光压），适合长期深空任务。</p>
                        <p class="disadvantages text-lg text-slate-300 mb-3"><strong>挑战/局限：：：</strong> 初期加速慢，需要极大的帆面积，部署和控制复杂，远离太阳后光压减弱。</p>
                    </div>
                </div>
                <div class="image-placeholder">
                    [Image: jpg16 - 核热推进（NTP）火箭发动机的艺术概念图，展示其喷口和核反应堆部分]
                </div>
            </div>
        </div>

        <div class="slide" id="slide-tech-survival">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">突破性技术：极端环境下的航天器生存 🛡️</h2>
                <p class="text-xl text-slate-300 mb-4">深空环境面临极端温度变化、高能宇宙射线和微流星体撞击的威胁。</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">结构完整性与材料选择</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>先进合金：</strong> 轻质、坚固且耐辐射的铝合金、钛合金和镍基高温合金。</li>
                            <li><strong>长期降解：</strong> 应对真空“放气”、摩擦磨损、辐射硬化/软化、微陨石侵蚀。</li>
                        </ul>
                        <h3 class="text-3xl font-semibold text-blue-400 mt-8 mb-6">热控系统（TCS）</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>被动热控：</strong> 多层绝缘（MLI）毯、涂层、百叶窗。</li>
                            <li><strong>主动热控：</strong> 电加热器、流体回路、放射性同位素加热单元（RHUs）、热管。</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">辐射硬化设计保护电子设备</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>特殊制造工艺：</strong> 如SOI技术使芯片对辐射不敏感。</li>
                            <li><strong>物理屏蔽层：</strong> 铅或铝增加关键电子元件外部保护。</li>
                            <li><strong>软件层面：</strong> 错误检测与纠正（EDAC）机制。</li>
                        </ul>
                        <div class="image-placeholder">
                            [Image: jpg8 - 航天器辐射屏蔽层剖面图，展示多层材料如何抵御辐射]
                        </div>
                        <p class="text-base text-slate-400 text-center mt-3">图：辐射屏蔽层示意图</p>
                        <h3 class="text-3xl font-semibold text-blue-400 mt-8 mb-6">任务规划规避已知流星群</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li>通过建模和实时监测，规划轨道和姿态，避免高密度微流星体区域。</li>
                            <li>关键部件采用双层或多层结构，分散撞击能量。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-tech-navigation">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">突破性技术：高精度导航与自主运行 🧭</h2>
                <p class="text-xl text-slate-300 mb-4">传统地球基导航方法在远距离精度下降。通信延迟要求航天器具备高度自主性。</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">创新导航方法</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>X射线脉冲星导航（XNAV）：</strong> 利用脉冲星发出的高度规律的X射线脉冲信号作为宇宙中的“灯塔”，精确计算航天器位置和速度。</li>
                            <li><strong>天体光谱测速法：：</strong> 通过分析深空天体光谱中的多普勒频移，精确测量航天器相对于这些天体的径向速度。</li>
                        </ul>
                        <div class="image-placeholder">
                            [Image: jpg9 - 脉冲星导航示意图，展示X射线信号如何被航天器接收并用于定位]
                        </div>
                        <p class="text-base text-slate-400 text-center mt-3">图：X射线脉冲星导航原理图</p>
                    </div>
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">高度自主运行</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>自主故障检测与纠正系统：</strong> 航天器搭载先进机载计算机和AI算法，实时监控健康状况，自动诊断并纠正故障。</li>
                            <li><strong>人工智能与机器学习辅助决策：：</strong> 利用AI模型分析海量传感器数据，识别模式，预测未来状态，辅助航天器在复杂环境下做出最佳决策。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-tech-payloads">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">突破性技术：科学载荷与小型化 🔬</h2>
                <p class="text-xl text-slate-300 mb-4">深空任务的科学广度直接取决于其载荷的质量和功率预算。通过微电子学和材料科学的进步实现科学仪器的小型化，是下一代探测器的关键推动力。</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">边界探索的关键仪器</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>等离子体探测器 & 磁力计：</strong> 测量等离子体密度、组成、温度、速度和磁场。</li>
                            <li><strong>宇宙射线子系统（CRS）& 低能带电粒子（LECP）探测器：</strong> 测量高能粒子组成、能量和角分布。</li>
                            <li><strong>尘埃探测器：</strong> 测量尘埃粒子的数量、速度、质量、电荷、方向和组成。</li>
                            <li><strong>光谱仪：</strong> 通过吸收/发射光谱法分析物质组成。</li>
                            <li><strong>成像仪：</strong> 用于飞越成像。</li>
                            <li><strong>高能中性原子（ENA）相机：：</strong> 对日球层边界相互作用进行成像。</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">小型化趋势与未来</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li>微电子学、材料科学和制造技术的进步使得更小、功能更强的卫星和仪器成为可能。</li>
                            <li>小型化仪器可减少质量和功耗，为其他仪器腾出空间或降低发射成本，从而最大限度地提高单次任务的科学回报。</li>
                            <li>未来概念甚至包括“晶圆级”航天器，集成光学通信、成像、推进器、电源和传感器。</li>
                        </ul>
                        <div class="image-placeholder">
                            [Image: jpg10 - 小型化科学仪器阵列的特写图，展示其紧凑和集成度]
                        </div>
                        <p class="text-base text-slate-400 text-center mt-3">图：小型化科学仪器阵列概念图</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-pioneers-voyager-overview">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">先行者之路：旅行者号 - 传奇任务概述 🌌</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">旅行者号：任务背景与目标</h3>
                        <p class="text-lg text-slate-300 mb-3">1977年发射，是人类历史上最成功的深空探测任务之一。利用行星引力弹弓效应，开启了对太阳系外围巨行星的宏伟探测之旅。</p>
                        <p class="text-lg text-slate-300 mb-2"><strong>运行寿命:</strong> <span id="voyagerLifespan" class="font-bold text-blue-300">45+</span> 年</p>
                        <p class="text-lg text-slate-300"><strong>关键成就:</strong> 首次飞越所有四颗外行星，并率先进入星际空间，发现了木卫一火山、木卫二海洋潜力，直接测量星际介质。</p>
                        <ul class="list-disc list-inside text-slate-300 space-y-2 mt-4 pl-4">
                            <li><strong>外行星大发现：</strong> 旅行者2号首次飞越了木星、土星、天王星、海王星，发现了它们的多颗新卫星和行星环。</li>
                            <li><strong>日球层穿越：</strong> 旅行者1号于2012年，旅行者2号于2018年相继穿越日球层顶，首次直接测量了星际空间的环境。</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-8 text-center">任务里程碑时间线</h3>
                        <div class="timeline max-w-3xl mx-auto">
                            <div class="timeline-item">
                                <div class="timeline-icon">🚀</div>
                                <h4 class="font-semibold text-blue-300">1977: 旅行者1号与2号发射</h4>
                                <p class="text-base text-slate-400">开启对外太阳系巨行星的首次详细探测。</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon">🪐</div>
                                <h4 class="font-semibold text-blue-300">1979-1989: 旅行者号飞越木、土、天、海</h4>
                                <p class="text-base text-slate-400">揭示了行星系统众多新特征。</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon">🌌</div>
                                <h4 class="font-semibold text-blue-300">2012 & 2018: 旅行者1号与2号进入星际空间</h4>
                                <p class="text-base text-slate-400">成为首批飞出日球层顶的人造物体。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-pioneers-voyager-resilience">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">先行者之路：旅行者号 - 工程韧性与宝贵经验</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start">
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">超长寿命运行与工程韧性</h3>
                        <p class="text-lg text-slate-300 mb-4">旅行者号是运行时间最长的航天器，其成功得益于卓越的工程设计和任务团队的持续努力。</p>
                        <ul class="list-disc list-inside text-slate-300 space-y-2 mt-4 pl-4 text-lg">
                            <li><strong>RTG供电:</strong> 采用放射性同位素热电发生器（RTG）供电，尽管功率逐年衰减，但通过关闭非关键仪器和加热器来延长任务寿命。</li>
                            <li><strong>自主故障保护:</strong> 具备先进的自主故障保护系统，能在与地球通信延迟长达22小时的情况下自我诊断和纠正问题。</li>
                        </ul>
                        <div class="image-placeholder">
                            [Image: jpg17 - 旅行者号探测器的艺术概念图，强调其天线和RTG]
                        </div>
                        <p class="text-base text-slate-400 text-center mt-3">图：旅行者号探测器</p>
                    </div>
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">克服挑战的宝贵经验</h3>
                        <p class="text-lg text-slate-300 mb-4">旅行者任务面临了多项挑战，但通过创造性解决方案和冗余设计成功克服。</p>
                        <ul class="list-disc list-inside text-slate-300 space-y-2 mt-4 pl-4 text-lg">
                            <li><strong>推进器故障:</strong> 2004年旅行者1号主推进器失效，团队成功重新激活休眠二十多年的主推进器。</li>
                            <li><strong>通信数据问题:</strong> 曾发送乱码，后通过代码重定位解决。</li>
                            <li><strong>关键因素:</strong> 任务团队的创造性解决方案、冗余设计和跨代知识传承是其克服困难、实现超长寿命的关键。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-pioneers-new-horizons-overview">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">先行者之路：新视野号 - 柯伊伯带先锋 🧊</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">新视野号：任务背景与成就</h3>
                        <p class="text-lg text-slate-300 mb-3">2006年发射，是迄今为止人类发射速度最快的航天器之一，首次近距离探测冥王星和柯伊伯带天体阿罗科斯。</p>
                        <p class="text-lg text-slate-300 mb-2"><strong>冥王星数据回传:</strong> <span class="font-bold text-blue-300">15+</span> 个月</p>
                        <p class="text-lg text-slate-300"><strong>关键成就:</strong> 揭示冥王星复杂地貌，探测最遥远天体，并确定冥王星直径约为2370公里。</p>
                        <ul class="list-disc list-inside text-slate-300 space-y-2 mt-4 pl-4">
                            <li><strong>飞越冥王星：</strong> 2015年首次近距离飞越冥王星及其五颗卫星，揭示了其复杂的表面地貌。</li>
                            <li><strong>飞越阿罗科斯：</strong> 2019年飞越了阿罗科斯（2014 MU69），提供了原始星子的宝贵数据。</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-8 text-center">任务里程碑时间线 (续)</h3>
                        <div class="timeline max-w-3xl mx-auto">
                            <div class="timeline-item">
                                <div class="timeline-icon">🚀</div>
                                <h4 class="font-semibold text-blue-300">2006: 新视野号发射</h4>
                                <p class="text-base text-slate-400">目标冥王星和柯伊伯带。</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon">🧊</div>
                                <h4 class="font-semibold text-blue-300">2015: 新视野号飞越冥王星</h4>
                                <p class="text-base text-slate-400">揭示了冥王星的复杂地质。</p>
                            </div>
                             <div class="timeline-item">
                                <div class="timeline-icon">☄️</div>
                                <h4 class="font-semibold text-blue-300">2019: 新视野号飞越阿罗科斯</h4>
                                <p class="text-base text-slate-400">近距离探测最遥远的原始星子。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-pioneers-new-horizons-challenges">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">先行者之路：新视野号 - 任务挑战与经验</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start">
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">任务设计与故障应对</h3>
                        <p class="text-lg text-slate-300 mb-4">新视野号同样依赖RTG供电（发射时约250瓦，冥王星飞越时约200瓦）。</p>
                        <ul class="list-disc list-inside text-slate-300 space-y-2 mt-4 pl-4 text-lg">
                            <li><strong>引力辅助机动:</strong> 2007年飞越木星，使其速度增加了约14000公里/小时，缩短了前往冥王星的旅程三年。</li>
                            <li><strong>计算机异常:</strong> 在冥王星飞越前三天曾遭遇关键的计算机异常，导致所有操作暂停，但通过冗余系统和任务团队的迅速响应成功恢复。</li>
                        </ul>
                        <div class="image-placeholder">
                            [Image: jpg18 - 新视野号探测器的艺术概念图，强调其天线和科学仪器]
                        </div>
                        <p class="text-base text-slate-400 text-center mt-3">图：新视野号探测器</p>
                    </div>
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">数据回传的巨大挑战</h3>
                        <p class="text-lg text-slate-300 mb-4">由于距离遥远和传输速率限制，冥王星的6.25GB数据回传耗时超过15个月，凸显了深空通信的巨大挑战。</p>
                        <ul class="list-disc list-inside text-slate-300 space-y-2 mt-4 pl-4 text-lg">
                            <li><strong>低带宽:</strong> 冥王星回传数据速率仅1-2千比特/秒。</li>
                            <li><strong>长时间延迟:</strong> 信号往返地球需要数小时。</li>
                            <li><strong>未来需求:</strong> 强调了未来深空任务在通信技术方面进行突破的紧迫性，例如发展光学通信。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-voyager-special">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">🚀 旅行者号专题：星际探索的传奇</h2>
                <p class="text-xl text-slate-300 mb-10 text-center max-w-4xl mx-auto">
                    深入了解旅行者1号和2号这两艘人类历史上最伟大的探测器。点击时间轴上的事件，探索它们的里程碑和开创性科学发现。
                </p>
                <div class="max-w-3xl mx-auto">
                    <h3 class="text-3xl font-semibold text-blue-400 mb-8 text-center">旅行者号任务时间轴与发现</h3>
                    <div class="timeline" id="voyagerTimeline">
                        </div>
                    <div id="voyagerDetailArea" class="hidden">
                        <h3 id="voyagerDetailTitle"></h3>
                        <p id="voyagerDetailDescription"></p>
                        <div id="voyagerDetailDiscoveries">
                            <h4 class="font-semibold text-blue-300 mt-5 mb-3">主要科学发现：：</h4>
                            <ul id="voyagerDiscoveriesList"></ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-china-action">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">中国行动：迈向深空的步伐 🇨🇳</h2>
                <p class="text-xl text-slate-300 mb-10 text-center max-w-4xl mx-auto">
                    中国在深空探测领域取得了举世瞩目的成就，这些探索不仅拓展了人类的认知边界，也为未来更遥远的太阳系边际探测奠定了坚实的技术和科学基础。
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start">
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">月球与火星探测：深空技术基石 🌕 Mars</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>嫦娥系列月球任务：：</strong> 成功实现了绕月探测、月球软着陆、巡视探测以及月球采样返回。这些任务积累了远距离测控通信、自主导航、长期能源保障等关键深空技术。</li>
                            <li><strong>天问一号火星任务：：：</strong> 一次性实现“绕、落、巡”三大目标，祝融号火星车开展巡视探测。火星任务对深空通信延迟、极端环境生存和自主运行提出了更高要求。</li>
                        </ul>
                        <div class="image-placeholder">
                            [Image: jpg11 - 嫦娥五号月球采样返回器或祝融号火星车艺术概念图]
                        </div>
                        <p class="text-base text-slate-400 text-center mt-3">图：中国月球或火星探测器</p>
                    </div>
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">迈向太阳系边际的未来展望 ✨</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>小行星探测：：</strong> 正在规划中的小行星探测任务，将进一步验证和发展深空自主导航、精确交会与伴飞等技术。</li>
                            <li><strong>木星系探测：：：：</strong> 对木星及其卫星的探测任务也在论证和规划中。木星系距离遥远，辐射环境复杂，对航天器的能源、通信和抗辐射能力提出严峻挑战。</li>
                            <li><strong>星际探测概念：：：：：</strong> 中国科学家也正在积极探讨和论证更远期的星际探测任务概念，旨在深入日球层顶和星际空间，探索太阳系真正的边界。</li>
                        </ul>
                        <div class="image-placeholder">
                            [Image: jpg12 - 中国未来深空探测器（如木星探测器或星际探测器）的艺术概念图]
                        </div>
                        <p class="text-base text-slate-400 text-center mt-3">图：中国未来深空探测概念</p>
                    </div>
                </div>
                <p class="text-xl text-slate-300 mt-8 text-center">
                    中国深空探测坚持自主创新与开放合作并重，积极推动国际交流与合作，共同应对深空探索的挑战，为构建人类命运共同体贡献力量。
                </p>
            </div>
        </div>

        <div class="slide" id="slide-future">
            <div class="card">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-10 text-center">未来征程：太阳系边际探测新纪元</h2>
                <p class="text-xl text-slate-300 mb-10 text-center max-w-4xl mx-auto">
                    基于现有成就，未来的深空任务将更加雄心勃勃，旨在深入星际介质，探索太阳系外围的更多未知，并可能带来关于宇宙基本性质和生命普遍性的突破性发现。
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start">
                    <div>
                        <h3 class="text-3xl font-semibold text-blue-400 mb-6">概念任务与前沿探测器 🚀</h3>
                        <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4 text-lg">
                            <li><strong>“星际探测器”计划 (NASA):</strong> 旨在超越旅行者号，深入星际介质，从外部对日球层成像，预计需要50年或更长时间才能到达。</li>
                            <li><strong>“星际日球层顶探测器”（IHP）概念 (ESA):</strong> 欧洲空间局（ESA）的类似概念，目标是在25年内到达200 AU，计划使用太阳帆或核电推进技术。</li>
                            <li><strong>彗星拦截器:</strong> 预计2029年发射，飞越奥尔特云彗星。</li>
                            <li><strong>天王星/海王星探测任务:</strong> 未来可能对冰巨行星进行专门探测。</li>
                            <li><strong>木星冰卫星探测器 (JUICE) / 欧罗巴快船:</strong> 正在进行中，研究木星冰卫星的宜居潜力。</li>
                        </ul>
                        <p class="text-lg text-slate-300 mt-6">未来的任务旨在提供对星际介质及其与日球层相互作用更全面的理解，超越仅仅的粒子计数，深入到详细的成分、磁场和动态过程。</p>
                    </div>
                    <div class="chart-container mx-auto h-80 bg-gray-800 p-4 rounded-lg shadow-inner">
                        <canvas id="futureProbeCapabilitiesChart"></canvas>
                    </div>
                </div>
                <p class="text-base text-slate-400 mt-4 text-center">雷达图（示意数据）：未来“星际探测器”概念与“旅行者号”在关键能力上的对比。</p>
                <p class="text-lg text-slate-300 mt-8">未来的探测器将配备更先进的科学仪器，例如IMAP仪器套件，能够测量高能中性原子、宇宙尘埃组成等，提供前所未有的详细数据。国际合作在这些复杂且耗资巨大的任务中也变得越来越重要。</p>
            </div>
        </div>

        <div class="slide" id="slide-conclusion">
            <div class="card text-center">
                <h2 class="text-4xl md:text-5xl font-extrabold section-title mb-8">结语：无尽的前沿</h2>
                <p class="text-xl text-slate-300 leading-relaxed max-w-4xl mx-auto">
                    太阳系边际的探索是人类对未知世界永恒好奇心的体现，它不仅拓展了我们对宇宙的认知边界，更提供了理解太阳系形成、演化以及生命起源的关键线索。从柯伊伯带中原始星子的残余，到奥尔特云中彗星的摇篮，再到日球层作为抵御星际宇宙射线的宇宙盾牌，每一次探测都加深了我们对自身在宇宙中位置的理解。
                </p>
                <p class="text-xl text-slate-300 leading-relaxed max-w-4xl mx-auto mt-6">
                    尽管深空探索面临着严峻的技术挑战，但人类的智慧和创新精神正不断突破这些极限。核电推进、深空光通信、先进材料和仪器小型化等前沿技术的发展，预示着一个更加雄心勃勃的深空探索新纪元。这些努力不仅服务于纯粹的科学发现，也推动了地球上的技术进步，例如GPS技术、太阳能电池板和应急信标等，都源于空间探索的需求。这种持续的探索，激发了全人类对宇宙的共同愿景，并不断拓展着人类文明的边界。
                </p>
                <div class="mt-10 p-8 bg-gray-800 rounded-xl border border-blue-700 shadow-xl text-left">
                    <h3 class="text-3xl font-semibold text-blue-400 mb-6 text-center">核心发现与行动建议</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h4 class="text-2xl font-semibold text-blue-300 mb-4">核心发现：：</h4>
                            <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4">
                                <li><strong>日球层作为动态边界：</strong> 现有探测器未能充分测量关键等离子体组成。</li>
                                <li><strong>柯伊伯带的未解之谜：</strong> 真实天体数量、尘埃生产机制仍是悬而未决的问题。</li>
                                <li><strong>奥尔特云的理论性：</strong> 缺乏直接观测数据。</li>
                                <li><strong>星际介质的关键影响：：</strong> 影响日球层的形状、大小和保护能力。</li>
                                <li><strong>技术瓶颈与机遇：：</strong> 新兴技术提供了突破可能。</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="text-2xl font-semibold text-blue-300 mb-4">行动建议：：</h4>
                            <ul class="list-disc list-inside text-slate-300 space-y-3 pl-4">
                                <li><strong>优先发展先进推进系统：</strong> 核电推进（NEP）和太阳帆技术。</li>
                                <li><strong>确保长期电源供应：：</strong> 研发先进斯特林放射性同位素发生器（ASRG）和小型裂变电源系统。</li>
                                <li><strong>加速深空光通信技术部署：：</strong> 优化激光指向精度、抗干扰能力。</li>
                                <li><strong>推进材料科学与工程创新：：</strong> 研发耐极端环境的新型材料。</li>
                                <li><strong>集成小型化、多功能科学载荷：：</strong> 实现多学科交叉的科学目标。</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-thank-you">
            <div class="card text-center">
                <h2 class="text-5xl md:text-6xl font-extrabold section-title mb-8">感谢聆听！</h2>
                <p class="text-2xl text-slate-300 mb-10 max-w-4xl mx-auto">
                    期待与您一同探索宇宙的奥秘。
                </p>
                <div class="text-4xl mb-8">🚀🌌✨</div>
                <p class="text-xl text-slate-400">Q & A</p>
            </div>
        </div>

    </div>

    <div class="slide-navigation">
        <button id="prevSlideBtn" class="slide-button" disabled>上一页</button>
        <span id="slideIndicator" class="slide-indicator">1 / 28</span>
        <button id="nextSlideBtn" class="slide-button">下一页</button>
    </div>

    <script>
        // --- Presentation Logic ---
        var slides = [
            'slide-title',
            'slide-blueprint',
            'slide-boundaries-overview',
            'slide-kuiper-belt',
            'slide-heliosphere',
            'slide-oort-ism',
            'slide-scaled-map',
            'slide-mysteries-origin', /* New slide for origin */
            'slide-mysteries-life', /* New slide for life/habitability */
            'slide-mysteries-ism', /* New slide for ISM direct detection */
            'slide-mysteries-unanswered',
            'slide-next-gen-goals',
            'slide-earth-importance',
            'slide-tech-communication',
            'slide-tech-energy',
            'slide-tech-propulsion',
            'slide-tech-survival',
            'slide-tech-navigation',
            'slide-tech-payloads',
            'slide-pioneers-voyager-overview', /* Split Voyager */
            'slide-pioneers-voyager-resilience', /* Split Voyager */
            'slide-pioneers-new-horizons-overview', /* Split New Horizons */
            'slide-pioneers-new-horizons-challenges', /* Split New Horizons */
            'slide-voyager-special',
            'slide-china-action',
            'slide-future',
            'slide-conclusion',
            'slide-thank-you'
        ];
        var currentSlideIndex = 0;
        var prevSlideBtn = document.getElementById('prevSlideBtn');
        var nextSlideBtn = document.getElementById('nextSlideBtn');
        var slideIndicator = document.getElementById('slideIndicator');

        function showSlide(index, direction = 'next') {
            // Ensure index is within bounds
            if (index < 0 || index >= slides.length) {
                console.warn("Invalid slide index:", index);
                return;
            }

            // Stop any active 3D animations before switching slides
            if (activeNuclearSystem.name && nuclearPowerAnimations[activeNuclearSystem.name]) {
                nuclearPowerAnimations[activeNuclearSystem.name].stop();
            }
            if (solarSystemAnimationId) {
                cancelAnimationFrame(solarSystemAnimationId);
                solarSystemAnimationId = null;
                // Dispose of solar system scene resources if not needed
                if (solarSystemScene) {
                    solarSystemScene.traverse(object => {
                        if (object.geometry) object.geometry.dispose();
                        if (object.material) {
                            if (Array.isArray(object.material)) {
                                object.material.forEach(m => m.dispose());
                            } else {
                                object.material.dispose();
                            }
                        }
                    });
                    solarSystemRenderer.dispose();
                    solarSystemScene = null;
                    solarSystemCamera = null;
                    solarSystemRenderer = null;
                    solarSystemControls = null;
                }
            }

            var currentActiveSlide = document.querySelector('.slide.active');
            var nextSlideElement = document.getElementById(slides[index]);

            if (!nextSlideElement) {
                console.error("Next slide element not found:", slides[index]);
                return;
            }

            // If there's an active slide, animate it out
            if (currentActiveSlide && currentActiveSlide !== nextSlideElement) {
                currentActiveSlide.classList.remove('active');
                currentActiveSlide.classList.add('leaving');
                if (direction === 'next') {
                    currentActiveSlide.classList.add('to-left');
                } else {
                    currentActiveSlide.classList.add('to-right');
                }

                // Use transitionend to hide the leaving slide after its animation
                currentActiveSlide.addEventListener('transitionend', function handler() {
                    currentActiveSlide.style.display = 'none';
                    currentActiveSlide.classList.remove('leaving', 'to-left', 'to-right');
                    currentActiveSlide.removeEventListener('transitionend', handler);
                }, { once: true }); // Ensure the listener is removed after one execution
            }

            // Prepare the incoming slide
            nextSlideElement.style.display = 'flex'; // Make it visible for transition
            nextSlideElement.classList.remove('leaving', 'to-left', 'to-right'); // Clean up any lingering classes

            // Set initial transform based on direction
            nextSlideElement.style.transform = direction === 'next' ? 'translateX(100%)' : 'translateX(-100%)';
            nextSlideElement.style.opacity = '0';

            // Force reflow to ensure initial transform is applied before starting transition
            void nextSlideElement.offsetWidth;

            // Animate the incoming slide into view
            nextSlideElement.classList.add('active');
            nextSlideElement.style.transform = 'translateX(0%)';
            nextSlideElement.style.opacity = '1';

            // Re-initialize/start 3D animations or charts when their slide becomes active
            if (slides[index] === 'slide-blueprint') {
                initSolarSystem3D();
            } else if (slides[index] === 'slide-tech-energy') {
                showSystemContent('RTG', 'energy');
            } else if (slides[index] === 'slide-tech-propulsion') {
                showSystemContent('NTP', 'propulsion');
            } else if (slides[index] === 'slide-mysteries-life') {
                initHeliosphereChart();
            } else if (slides[index] === 'slide-future') {
                initFutureProbeChart();
            }

            currentSlideIndex = index;
            updateSlideNavigation();
        }

        function updateSlideNavigation() {
            slideIndicator.textContent = `${currentSlideIndex + 1} / ${slides.length}`;
            prevSlideBtn.disabled = currentSlideIndex === 0;
            nextSlideBtn.disabled = currentSlideIndex === slides.length - 1;
        }

        prevSlideBtn.addEventListener('click', () => {
            if (currentSlideIndex > 0) {
                showSlide(currentSlideIndex - 1, 'prev');
            }
        });

        nextSlideBtn.addEventListener('click', () => {
            if (currentSlideIndex < slides.length - 1) {
                showSlide(currentSlideIndex + 1, 'next');
            }
        });

        // Keyboard navigation for slides
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') { // Right arrow or spacebar for next slide
                if (currentSlideIndex < slides.length - 1) {
                    showSlide(currentSlideIndex + 1, 'next');
                }
            } else if (e.key === 'ArrowLeft') { // Left arrow for previous slide
                if (currentSlideIndex > 0) {
                    showSlide(currentSlideIndex - 1, 'prev');
                }
            }
        });

        // Initialize first slide on load
        document.addEventListener('DOMContentLoaded', () => {
            showSlide(0);
        });

        // --- Original JavaScript (modified for presentation mode) ---

        // Boundary Details Modal Logic
        var boundaryDetailModal = document.getElementById('boundaryDetailModal');
        var closeModalButton = document.getElementById('closeModalButton');
        var modalTitle = document.getElementById('modalTitle');
        var modalContent = document.getElementById('modalContent');

        var boundaryDetails = {
            kuiper: {
                title: "柯伊伯带 (Kuiper Belt)",
                content: `
                    <p><strong>定义:</strong> 海王星轨道以外的广阔冰冷天体区域，是太阳系早期历史的残余物。</p>
                    <p><strong>距离太阳 (近似):</strong> 30 - 1,000 AU (天文单位)，其“散射盘”甚至可延伸至近1000天文单位。</p>
                    <p><strong>组成/特征:</strong> 主要由冰（水冰、甲烷冰、氨冰）和岩石构成。包含数百万个柯伊伯带天体 (KBOs)，其中包括冥王星、阋神星等矮行星。其形状更像一个厚实的圆盘。天体多样，包括“冷”经典KBOs和“热”经典KBOs，以及被海王星散射到高度椭圆轨道的散射盘天体。</p>
                    <p><strong>探测意义:</strong> 研究柯伊伯带天体有助于理解行星形成过程、太阳系早期物质分布和演化路径，以及彗星的起源。冥王星与海王星的3:2轨道共振使其被归类为冥王星族天体。</p>
                `
            },
            heliopause: {
                title: "日球层顶 (Heliosphere & Heliopause)",
                content: `
                    <p><strong>定义:</strong> 太阳风在星际介质中吹出的巨大“气泡”称为日球层。日球层顶是太阳风压力与星际介质压力相等的边界，标志着太阳影响范围的磁性边界。</p>
                    <p><strong>距离太阳 (近似):</strong> 约 123 - 140 AU。其形状并非完美球形，可能呈泪滴状或更复杂形态。</p>
                    <p><strong>组成/特征:</strong> 包含终端激波（太阳风减速处）和日鞘（终端激波与日球层顶之间的区域）。主要由太阳风等离子体构成，与星际气体、尘埃和宇宙射线相互作用。</p>
                    <p><strong>探测意义::</strong> 理解太阳系如何与星际介质相互作用，研究日球层如何保护内部行星免受有害银河宇宙射线的侵袭，这对于地球生命的宜居性至关重要。旅行者1号和2号是历史上唯一在日球层外运行的航天器。</p>
                `
            },
            hotwall: {
                title: "热墙 (Hot Wall)",
                content: `
                    <p><strong>定义:</strong> 位于日球层顶外侧，由被太阳风弓形激波加热的星际氢原子形成的区域。</p>
                    <p><strong>距离太阳 (近似):</strong> 约 200 AU。</p>
                    <p><strong>组成/特征:</strong> 主要由被加热到约6000开尔文的星际中性氢原子构成。这些原子在进入日球层顶前的弓形激波区域被加热。</p>
                    <p><strong>探测意义:</strong> 探测热墙有助于我们理解太阳系与星际介质的精确相互作用过程，特别是星际氢原子如何穿透日球层并影响其内部环境。它是研究星际介质物理状态的关键区域。</p>
                `
            },
            oort: {
                title: "奥尔特云 (Oort Cloud)",
                content: `
                    <p><strong>定义:</strong> 一个理论上存在的、极其遥远的冰冷天体球状壳层，环绕着太阳系。</p>
                    <p><strong>距离太阳 (近似):</strong> 3,000 - 100,000 AU，甚至可能达到200,000天文单位，延伸至太阳引力影响的遥远边缘，是太阳系的宇宙学边界。</p>
                    <p><strong>组成/特征:</strong> 主要由冰质彗星状天体构成。这些天体被认为是太阳系形成初期在内侧形成后被巨行星引力抛射至外围的，是大多数长周期彗星和哈雷型彗星的来源。</p>
                    <p><strong>探测意义:</strong> 奥尔特云作为太阳系最外层受太阳和银河引力共同影响的区域，代表了太阳系演化与银河系动力学交汇的独特区域。研究它能提供关于太阳系早期物质分布、行星迁移历史以及彗星来源的宝贵线索。凭借目前的成像技术，无法直接观测到奥尔特云。</p>
                `
            },
            ism: {
                title: "局部星际介质 (Local Interstellar Medium)",
                content: `
                    <p><strong>定义:</strong> 存在于星系中恒星系统之间的物质和辐射，主要由氢和氦组成，但也包含尘埃和宇宙射线。它充满着星际空间，并平滑地融入周围的星系际介质。</p>
                    <p><strong>距离太阳 (近似):</strong> 位于日球层之外 (>140 AU)。</p>
                    <p><strong>组成/特征:</strong> 主要由氢、氦、尘埃和宇宙射线构成。它并非一个静态的真空区域，而是一个动态环境，直接影响着日球层，并与太阳风的相互作用形成了日球层的边界。</p>
                    <p><strong>探测意义:</strong> 理解星际介质对于理解太阳系的“空间天气”及其在银河系中的长期演化至关重要。它在天体物理学中扮演着至关重要的角色，因为恒星在其最致密的区域内形成，并通过恒星演化过程得到补充。</p>
                `
            }
        };

        function showBoundaryDetail(boundaryKey) {
            if (boundaryDetails[boundaryKey]) {
                modalTitle.textContent = boundaryDetails[boundaryKey].title;
                modalContent.innerHTML = boundaryDetails[boundaryKey].content;
                boundaryDetailModal.classList.remove('hidden');
            }
        }
        if(closeModalButton) {
            closeModalButton.addEventListener('click', () => {
                boundaryDetailModal.classList.add('hidden');
            });
        }
        if(boundaryDetailModal) {
            boundaryDetailModal.addEventListener('click', (event) => {
                if (event.target === boundaryDetailModal) {
                    boundaryDetailModal.classList.add('hidden');
                }
            });
        }

        // Chart.js Utilities
        function processChartLabels(labels, maxLength = 16) {
            return labels.map(label => {
                if (typeof label === 'string' && label.length > maxLength) {
                    var words = label.split(' ');
                    var lines = [];
                    var currentLine = '';
                    for (var word of words) {
                        if ((currentLine + word).length > maxLength && currentLine.length > 0) {
                            lines.push(currentLine.trim());
                            currentLine = word + ' ';
                        } else {
                            currentLine += word + ' ';
                        }
                    }
                    lines.push(currentLine.trim());
                    return lines;
                }
                return label;
            });
        }

        var commonChartTooltipOptions = {
            callbacks: {
                title: function(tooltipItems) {
                    var item = tooltipItems[0];
                    if (!item) return '';
                    var label = item.chart.data.labels[item.dataIndex];
                    return Array.isArray(label) ? label.join(' ') : label;
                }
            }
        };
        
        var commonChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: { color: '#94a3b8' } /* Light grey for legend text */
                },
                tooltip: commonChartTooltipOptions
            },
            scales: {
                x: {
                    ticks: { color: '#94a3b8' },
                    grid: { color: 'rgba(71, 85, 105, 0.3)' } /* Darker grid lines */
                },
                y: {
                    ticks: { color: '#94a3b8' },
                    grid: { color: 'rgba(71, 85, 105, 0.3)' },
                    beginAtZero: true
                }
            }
        };

        // Heliosphere Protection Chart
        var heliosphereCtx = document.getElementById('heliosphereProtectionChart');
        var heliosphereChart = null; // Store chart instance

        function initHeliosphereChart() {
            if (heliosphereCtx && !heliosphereChart) {
                heliosphereChart = new Chart(heliosphereCtx, {
                    type: 'doughnut',
                    data: {
                        labels: processChartLabels(['被偏转/调制的GCRs', '穿透的GCRs (示意)']),
                        datasets: [{
                            label: '日球层对银河宇宙射线(GCRs)的防护作用',
                            data: [85, 15],
                            backgroundColor: ['#60a5fa', '#fcd34d'], /* Blue and Yellow */
                            borderColor: '#1f2937', /* Matches card background */
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'top', labels: { color: '#94a3b8'} },
                            tooltip: commonChartTooltipOptions
                        }
                    }
                });
            } else if (heliosphereChart) {
                heliosphereChart.update(); // Update existing chart if needed
            }
        }

        // Future Probe Capabilities Chart (Radar)
        var futureProbeCtx = document.getElementById('futureProbeCapabilitiesChart');
        var futureProbeChart = null; // Store chart instance

        function initFutureProbeChart() {
            if (futureProbeCtx && !futureProbeChart) {
                futureProbeChart = new Chart(futureProbeCtx, {
                    type: 'radar',
                    data: {
                        labels: processChartLabels(['最远探测距离', '数据传输速率', '任务设计寿命', '科学仪器功率', '自主运行能力']),
                        datasets: [
                            {
                                label: '旅行者号 (示意)',
                                data: [70, 30, 90, 40, 60],
                                backgroundColor: 'rgba(96, 165, 250, 0.2)', /* Light blue transparent */
                                borderColor: '#60a5fa', /* Light blue */
                                pointBackgroundColor: '#60a5fa'
                            },
                            {
                                label: '星际探测器概念 (示意)',
                                data: [100, 80, 100, 85, 95],
                                backgroundColor: 'rgba(167, 139, 250, 0.2)', /* Purple transparent */
                                borderColor: '#a78bfa', /* Purple */
                                pointBackgroundColor: '#a78bfa'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'top', labels: { color: '#94a3b8'} },
                            tooltip: commonChartTooltipOptions
                        },
                        scales: {
                            r: {
                                angleLines: { color: 'rgba(71, 85, 105, 0.3)' },
                                grid: { color: 'rgba(71, 85, 105, 0.3)' },
                                pointLabels: { color: '#94a3b8', font: {size: 12} },
                                ticks: {
                                    backdropColor: 'rgba(0,0,0,0)',
                                    color: '#94a3b8',
                                    stepSize: 20
                                },
                                suggestedMin: 0,
                                suggestedMax: 100
                            }
                        }
                    }
                });
            } else if (futureProbeChart) {
                futureProbeChart.update(); // Update existing chart if needed
            }
        }


        // Voyager Lifespan calculation
        var voyagerLifespanElement = document.getElementById('voyagerLifespan');
        if (voyagerLifespanElement) {
            var launchYear = 1977;
            var currentYear = new Date().getFullYear();
            voyagerLifespanElement.textContent = (currentYear - launchYear) + "+";
        }

        // Scaled Map Logic
        var planetsData = [
            { name: "太阳", location: "E1B215教室", distanceAU: 0, color: "#facc15" }, /* Gold */
            { name: "水星", location: "E1B入口", distanceAU: 0.39, color: "#94a3b8" }, /* Slate */
            { name: "金星", location: "恐龙雕像", distanceAU: 0.72, color: "#f97316" }, /* Orange */
            { name: "地球", location: "岭南阁", distanceAU: 1.0, color: "#3b82f6" }, /* Blue */
            { name: "火星", location: "求真广场", distanceAU: 1.52, color: "#ef4444" }, /* Red */
            { name: "木星", location: "珙桐宿舍", distanceAU: 5.2, color: "#fcd34d" }, /* Yellow */
            { name: "土星", location: "行星中心", distanceAU: 9.58, color: "#fbbf24" }, /* Amber */
            { name: "天王星", location: "花园城", distanceAU: 19.2, color: "#22d3ee" }, /* Cyan */
            { name: "海王星", location: "东郊记忆", distanceAU: 30.05, color: "#60a5fa" }, /* Light Blue */
            { name: "冥王星", location: "建设路小吃街", distanceAU: 39.48, color: "#94a3b8" }, /* Slate */
            { name: "柯伊伯带", location: "万象城", distanceAU: 50, color: "#cbd5e1" }, /* Light Slate */
            { name: "奥尔特云", location: "6800公里外", distanceAU: 100000, color: "#e2e8f0" }, /* Even Lighter Slate */
        ];

        var maxAU = 100000;

        var solarSystemProgressBar = document.getElementById('solarSystemProgressBar');
        var planetCardsGrid = document.getElementById('planetCardsGrid');
        var planetDetailModal = document.getElementById('planetDetailModal');
        var closePlanetModalButton = document.getElementById('closePlanetModalButton');
        var planetModalTitle = document.getElementById('planetModalTitle');
        var planetModalContent = document.getElementById('planetModalContent');

        function renderSolarSystemMap() {
            if (!solarSystemProgressBar || !planetCardsGrid) return;

            solarSystemProgressBar.innerHTML = '';
            planetCardsGrid.innerHTML = '';

            planetsData.forEach((planet, index) => {
                var left = `${(planet.distanceAU / maxAU) * 100}%`;
                var indicator = document.createElement('div');
                indicator.className = 'planet-indicator';
                indicator.style.left = left;
                indicator.style.backgroundColor = planet.color;
                indicator.title = `${planet.name} - ${planet.location}`;
                indicator.style.transitionDelay = `${index * 0.05}s`; /* Faster animation */
                
                indicator.addEventListener('click', () => {
                    planetModalTitle.textContent = planet.name;
                    planetModalContent.innerHTML = `
                        <p class="text-lg text-slate-300 mb-3">📍 ${planet.location}</p>
                        <p class="text-lg text-slate-300 mb-3">🌌 距离太阳：${planet.distanceAU} AU</p>
                        <p class="text-lg text-slate-300">📏 约 ${(planet.distanceAU * 149.6).toFixed(2)} 百万公里</p>
                    `;
                    planetDetailModal.classList.remove('hidden');
                });
                solarSystemProgressBar.appendChild(indicator);

                setTimeout(() => {
                    indicator.classList.add('animate-in');
                }, 10);
            });

            planetsData.forEach((planet, index) => {
                var card = document.createElement('div');
                card.className = 'planet-card-item';
                card.innerHTML = `
                    <h2 class="text-2xl" style="color: ${planet.color};">${planet.name}</h2>
                    <p>📍 ${planet.location}</p>
                    <p>☄️ 距离太阳：${planet.distanceAU} AU</p>
                    <p>📏 ≈ ${(planet.distanceAU * 149.6).toFixed(2)} 百万公里</p>
                `;
                planetCardsGrid.appendChild(card);
            });
        }

        if (closePlanetModalButton) {
            closePlanetModalButton.addEventListener('click', () => {
                planetDetailModal.classList.add('hidden');
            });
        }
        if (planetDetailModal) {
            planetDetailModal.addEventListener('click', (event) => {
                if (event.target === planetDetailModal) {
                    planetDetailModal.classList.add('hidden');
                }
            });
        }

        // Earth Importance Table Logic
        var importanceData = [
            {
                title: "宇宙射线防护",
                summary: "日球层保护地球免受高能宇宙射线侵害。",
                detail: `
                    <p><strong>详细说明:</strong> 太阳风形成的日球层是地球和其他行星的天然屏障，能够偏转和调制来自银河系的高能宇宙射线（GCRs）。这些GCRs对生物体有害，可能导致DNA损伤、癌症风险增加，并对宇航员健康和航天器电子设备构成威胁。通过研究日球层对GCRs的防护机制，我们能更好地理解地球生命的宜居条件，并为未来的载人深空任务开发更有效的辐射防护技术。</p>
                    <p><strong>相关研究:</strong> 旅行者号探测器直接测量了日球层顶内外的宇宙射线强度，证实了日球层的保护作用。</p>
                `
            },
            {
                title: "地球气候与太阳活动",
                summary: "了解太阳活动对地球气候的长期影响。",
                detail: `
                    <p><strong>详细说明:</strong> 太阳活动（如太阳风、太阳耀斑、日冕物质抛射）的变化会影响地球磁场、电离层和大气层。虽然短期影响有限，但长期来看，太阳活动周期可能与地球气候的某些变化模式相关。通过深空探测，我们可以更精确地监测太阳风和星际介质的相互作用，从而提升对太阳活动及其对地球气候影响的预测能力。</p>
                    <p><strong>相关研究:</strong> 对太阳风和星际介质的持续监测有助于建立更精确的太阳-地球关系模型。</p>
                `
            },
            {
                title: "小行星与彗星预警",
                summary: "探测太阳系边缘天体，提前预警潜在撞击威胁。",
                detail: `
                    <p><strong>详细说明:</strong> 柯伊伯带和奥尔特云是大量小行星和彗星的家园。这些天体在引力扰动下可能进入内太阳系，对地球构成潜在的撞击威胁。通过深空探测，我们可以识别和编目这些遥远的天体，评估其轨道和潜在风险，为地球防御系统提供宝贵的预警时间。新视野号对柯伊伯带天体的探测，就是这一努力的一部分。</p>
                    <p><strong>相关研究:</strong> 对柯伊伯带和奥尔特云天体的编目和轨道分析是行星防御的关键。</p>
                `
            },
            {
                title: "资源探索与利用",
                summary: "寻找未来人类深空活动所需的稀有资源。",
                detail: `
                    <p><strong>详细说明:</strong> 太阳系边缘的冰质天体（如柯伊伯带天体和彗星）富含水冰、甲烷、氨等挥发性物质，这些是未来深空任务（如载人火星任务、月球基地建设）所需的燃料、生命支持和建筑材料。对这些天体组成的研究，有助于评估其资源潜力，为未来的人类深空活动提供补给站的可能性。</p>
                    <p><strong>相关研究:</strong> 彗星和小行星的成分分析揭示了其丰富的挥发物资源。</p>
                `
            },
            {
                title: "技术创新与应用",
                summary: "深空探测推动地球科技进步。",
                detail: `
                    <p><strong>详细说明:</strong> 为了克服深空探测的极端挑战（如超远距离通信、能源自给、极端环境生存、自主导航），科学家和工程师被迫开发出许多前沿技术。这些技术最终会反哺地球，例如GPS、太阳能电池板、图像处理技术、医疗设备等，都受益于空间探索的投入。深空探测是国家科技创新和产业升级的重要驱动力。</p>
                    <p><strong>相关研究:</strong> 激光通信、核推进、自主AI等技术在深空探索中得到验证和发展。</p>
                `
            }
        ];

        function renderImportanceTable() {
            var importanceTableBody = document.getElementById('importanceTableBody');
            if (!importanceTableBody) return;

            importanceTableBody.innerHTML = ''; // Clear existing content

            importanceData.forEach((item, index) => {
                var row = document.createElement('tr');
                row.className = `cursor-pointer transition-colors duration-200 ${index % 2 === 0 ? 'bg-gray-800 hover:bg-gray-700' : 'bg-gray-700 hover:bg-gray-600'}`;
                row.innerHTML = `
                    <td class="py-3 px-6 border-b border-slate-700 text-slate-200 font-medium">${item.title}</td>
                    <td class="py-3 px-6 border-b border-slate-700 text-slate-300">${item.summary}</td>
                `;
                row.addEventListener('click', () => showImportanceDetail(item));
                importanceTableBody.appendChild(row);
            });
        }

        var importanceDetailModal = document.getElementById('importanceDetailModal');
        var closeImportanceModalButton = document.getElementById('closeImportanceModalButton');
        var importanceModalTitle = document.getElementById('importanceModalTitle');
        var importanceModalContent = document.getElementById('importanceModalContent');

        function showImportanceDetail(item) {
            if (importanceDetailModal) {
                importanceModalTitle.textContent = item.title;
                importanceModalContent.innerHTML = item.detail;
                importanceDetailModal.classList.remove('hidden');
            }
        }

        if (closeImportanceModalButton) {
            closeImportanceModalButton.addEventListener('click', () => {
                importanceDetailModal.classList.add('hidden');
            });
        }
        if (importanceDetailModal) {
            importanceDetailModal.addEventListener('click', (event) => {
                if (event.target === importanceDetailModal) {
                    importanceDetailModal.classList.add('hidden');
                }
            });
        }

        // Voyager Special Topic Section JavaScript
        var voyagerTimelineData = [
            {
                year: "1977年",
                title: "旅行者1号与2号发射",
                description: "两艘探测器相隔16天发射，利用行星引力弹弓效应，开启了对太阳系外围巨行星的宏伟探测之旅。",
                discoveries: [
                    "任务目标：首次详细探测木星、土星、天王星、海王星，并最终飞出太阳系。",
                    "技术突破：利用行星引力辅助技术，大大缩短了飞行时间并节省了燃料。"
                ],
                icon: "🚀"
            },
            {
                year: "1979年",
                title: "旅行者1号飞越木星",
                description: "旅行者1号首次近距离探测木星及其卫星，揭示了木星系统的惊人细节。",
                discoveries: [
                    "发现木卫一（Io）上的活火山，这是人类首次在太阳系其他天体上观测到火山活动。",
                    "发现木星环的复杂结构和细节。",
                    "详细测量了木星的磁场和辐射带。"
                ],
                icon: "🪐"
            },
            {
                year: "1980年",
                title: "旅行者1号飞越土星",
                description: "旅行者1号对土星及其卫星进行了详细观测，特别是土卫六泰坦。",
                discoveries: [
                    "发现土卫六（Titan）拥有浓厚的大气层，主要由氮气和甲烷组成，为未来探测土卫六提供了重要线索。",
                    "详细拍摄了土星环的复杂结构，包括环缝和环的组成。"
                ],
                icon: "🪐"
            },
            {
                year: "1981年",
                title: "旅行者2号飞越土星",
                description: "旅行者2号继续对土星系统进行补充探测，并利用土星引力前往天王星。",
                discoveries: [
                    "进一步确认了土星环的细节和土卫六大气的特性。",
                    "为后续飞越天王星和海王星奠定基础。"
                ],
                icon: "🪐"
            },
            {
                year: "1986年",
                title: "旅行者2号飞越天王星",
                description: "旅行者2号首次近距离探测天王星，揭示了这颗冰巨星的独特之处。",
                discoveries: [
                    "发现天王星的磁场轴线与自转轴线倾斜近60度，且磁场中心偏离行星中心。",
                    "发现10颗新的卫星和两道新的行星环。",
                    "测量了天王星大气层的组成和温度。"
                ],
                icon: "🧊"
            },
            {
                year: "1989年",
                title: "旅行者2号飞越海王星",
                description: "旅行者2号完成了对太阳系四大巨行星的首次探测，带来了海王星的惊人图像和数据。",
                discoveries: [
                    "发现海王星大气层中的“大黑斑”风暴系统，类似于木星的“大红斑”。",
                    "发现海王星拥有多颗新卫星，包括海卫一（Triton）上活跃的冰火山，表明其内部可能存在活动。",
                    "首次确认海王星的行星环是不完整的弧形结构。"
                ],
                icon: "💧"
            },
            {
                year: "2004年",
                title: "旅行者1号穿越终端激波",
                description: "旅行者1号穿越了终端激波，这是太阳风速度从超音速降至亚音速的区域。",
                discoveries: [
                    "首次直接测量到太阳风减速的边界，验证了日球层模型的预测。",
                    "标志着探测器进入了日鞘区域。"
                ],
                icon: "💨"
            },
            {
                year: "2007年",
                title: "旅行者2号穿越终端激波",
                description: "旅行者2号也穿越了终端激波，提供了更多关于太阳风减速区域的数据。",
                discoveries: [
                    "与旅行者1号的数据相互验证，帮助科学家更好地理解终端激波的动态和结构。"
                ],
                icon: "💨"
            },
            {
                year: "2012年",
                title: "旅行者1号进入星际空间",
                description: "旅行者1号穿越日球层顶，正式进入星际介质，成为人类历史上首个进入星际空间的人造物体。",
                discoveries: [
                    "<strong>星际磁场：：</strong> 探测到磁场强度显著增加，且方向与日球层内部磁场不同，证实了进入星际空间。",
                    "<strong>宇宙射线：：：</strong> 银河宇宙射线（GCRs）强度急剧增加，而太阳系内部的太阳宇宙射线则几乎消失。",
                    "<strong>星际等离子体：：：：</strong> 首次直接测量到星际等离子体的密度，发现其比日球层内部稀薄但温度更高。"
                ],
                icon: "🌌"
            },
            {
                year: "2018年",
                title: "旅行者2号进入星际空间",
                description: "旅行者2号也穿越日球层顶，从不同位置和时间点提供了星际空间的数据，验证并补充了旅行者1号的发现。",
                discoveries: [
                    "<strong>星际磁场：：：</strong> 再次确认星际磁场强度和方向的变化，提供了日球层顶形状的新线索。",
                    "<strong>宇宙射线：：：：</strong> 观测到与旅行者1号类似的宇宙射线变化，增强了对日球层防护作用的理解。",
                    "<strong>星际等离子体：：：：：</strong> 进一步测量了星际等离子体的特性，有助于构建更精确的日球层模型。"
                ],
                icon: "🌌"
            },
            {
                year: "2025年至今",
                title: "持续运行与未来挑战",
                description: "旅行者号探测器仍在继续向外飞行，收集星际空间数据，但面临能源耗尽和仪器关闭的挑战。",
                discoveries: [
                    "<strong>能源衰减：：</strong> 放射性同位素热电发生器（RTG）功率持续衰减，部分仪器已被关闭以延长任务寿命。",
                    "<strong>通信挑战：：：：</strong> 信号越来越弱，通信窗口越来越短，需要地面深空网络持续升级和优化。",
                    "<strong>科学价值：：：：</strong> 即使只剩少量仪器运行，旅行者号仍是人类唯一能直接测量星际空间环境的探测器，其数据对理解星际介质和日球层演化至关重要。"
                ],
                icon: "⏳"
            }
        ];

        var voyagerTimelineDiv = document.getElementById('voyagerTimeline');
        var voyagerDetailArea = document.getElementById('voyagerDetailArea');
        var voyagerDetailTitle = document.getElementById('voyagerDetailTitle');
        var voyagerDetailDescription = document.getElementById('voyagerDetailDescription');
        var voyagerDiscoveriesList = document.getElementById('voyagerDiscoveriesList');

        function renderVoyagerTimeline() {
            if (!voyagerTimelineDiv) return;

            voyagerTimelineDiv.innerHTML = ''; // Clear existing content

            voyagerTimelineData.forEach((event, index) => {
                var timelineItem = document.createElement('div');
                timelineItem.className = 'timeline-item';
                timelineItem.innerHTML = `
                    <div class="timeline-icon">${event.icon}</div>
                    <h4 class="font-semibold text-blue-300">${event.year}: ${event.title}</h4>
                    <p class="text-base text-slate-400">${event.description}</p>
                `;
                timelineItem.addEventListener('click', () => showVoyagerDetail(event));
                voyagerTimelineDiv.appendChild(timelineItem);
            });
        }

        function showVoyagerDetail(event) {
            if (!voyagerDetailArea) return;

            voyagerDetailTitle.textContent = event.title;
            voyagerDetailDescription.textContent = event.description;
            voyagerDiscoveriesList.innerHTML = ''; // Clear previous discoveries

            if (event.discoveries && event.discoveries.length > 0) {
                event.discoveries.forEach(discovery => {
                    var listItem = document.createElement('li');
                    listItem.textContent = discovery;
                    voyagerDiscoveriesList.appendChild(listItem);
                });
                voyagerDetailDiscoveries.style.display = 'block'; // Show discoveries section
            } else {
                voyagerDetailDiscoveries.style.display = 'none'; // Hide if no discoveries
            }

            voyagerDetailArea.classList.remove('hidden');
            // Scroll to the detail area for better UX on mobile
            voyagerDetailArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }


        // Craft Power & Propulsion System Logic (from nuclear_propulsion_principles_v1)
        var systemTabs = document.getElementById('systemTabs');
        var propulsionTabs = document.getElementById('propulsionTabs');

        var systemContents = document.querySelectorAll('#systemContent .content-box');
        var propulsionContents = document.querySelectorAll('#propulsionContent .content-box');


        // Store active 3D animations for each system
        var nuclearPowerAnimations = {};

        function showSystemContent(systemName, type) {
            // Stop animation of the currently active system
            if (activeNuclearSystem.name && nuclearPowerAnimations[activeNuclearSystem.name]) {
                nuclearPowerAnimations[activeNuclearSystem.name].stop();
            }

            var currentTabsContainer = type === 'energy' ? systemTabs : propulsionTabs;
            var currentContents = type === 'energy' ? systemContents : propulsionContents;

            if (currentTabsContainer) { // Check if element exists (it might be null if not on this slide)
                currentTabsContainer.querySelectorAll('.tab-button').forEach(button => {
                    button.classList.remove('active');
                });
                var activeButton = currentTabsContainer.querySelector(`[data-system="${systemName}"]`);
                if (activeButton) {
                    activeButton.classList.add('active');
                }
            }


            currentContents.forEach(content => {
                if (content.dataset.content === systemName) {
                    content.classList.add('active');
                    content.style.display = 'block'; // Ensure it's visible for 3D rendering
                } else {
                    content.classList.remove('active');
                    content.style.display = 'none';
                }
            });

            var activeContent = document.querySelector(`[data-content="${systemName}"]`);
            if (activeContent) {
                // Ensure the 3D scene for this system is initialized
                if (nuclearPowerCanvases[systemName]) { // Only initialize if it's a canvas-based system
                    if (!nuclearPowerScenes[systemName]) {
                        initNuclearPower3D(systemName);
                    }

                    // IMPORTANT: Resize renderer and update camera AFTER the canvas becomes visible
                    var canvas = nuclearPowerCanvases[systemName];
                    var camera = nuclearPowerCameras[systemName];
                    var renderer = nuclearPowerRenderers[systemName];

                    if (canvas && camera && renderer) {
                        camera.aspect = canvas.clientWidth / canvas.clientHeight;
                        camera.updateProjectionMatrix();
                        renderer.setSize(canvas.clientWidth, canvas.clientHeight);
                    } else {
                        console.warn(`Could not resize renderer for ${systemName}. Canvas, camera, or renderer not found.`);
                    }

                    // Start 3D animation for the active tab
                    if (nuclearPowerAnimations[systemName] && nuclearPowerAnimations[systemName].start) {
                        nuclearPowerAnimations[systemName].start();
                        activeNuclearSystem.name = systemName; // Set the new active system
                    }
                } else {
                    activeNuclearSystem.name = null; // No 3D animation for this content
                }
            }
        }

        if (systemTabs) {
            systemTabs.addEventListener('click', (e) => {
                if (e.target.classList.contains('tab-button')) {
                    var systemName = e.target.dataset.system;
                    showSystemContent(systemName, 'energy');
                }
            });
        }
        if (propulsionTabs) {
            propulsionTabs.addEventListener('click', (e) => {
                if (e.target.classList.contains('tab-button')) {
                    var systemName = e.target.dataset.system;
                    showSystemContent(systemName, 'propulsion');
                }
            });
        }


        // 3D Solar System Model Initialization
        var solarSystemScene, solarSystemCamera, solarSystemRenderer, solarSystemControls, solarSystemAnimationId;
        var solarSystemCanvas = document.getElementById('solarSystem3DCanvas');

        function initSolarSystem3D() {
            if (!solarSystemCanvas) return;

            // Prevent re-initialization if already running
            if (solarSystemScene) {
                animateSolarSystem(); // Just restart animation if scene exists
                return;
            }

            // Scene
            solarSystemScene = new THREE.Scene();

            // Camera
            solarSystemCamera = new THREE.PerspectiveCamera(75, solarSystemCanvas.clientWidth / solarSystemCanvas.clientHeight, 0.1, 1000);
            solarSystemCamera.position.z = 150; // Adjust camera position for better view

            // Renderer
            solarSystemRenderer = new THREE.WebGLRenderer({ canvas: solarSystemCanvas, antialias: true });
            solarSystemRenderer.setSize(solarSystemCanvas.clientWidth, solarSystemCanvas.clientHeight);
            solarSystemRenderer.setClearColor(0x0a0a0a, 1); // Dark background for space

            // Lights
            var ambientLight = new THREE.AmbientLight(0x404040); // Soft white light
            solarSystemScene.add(ambientLight);

            var sunLight = new THREE.PointLight(0xffffff, 1, 0); // White light, no decay over distance
            sunLight.position.set(0, 0, 0); // Position at the center (Sun's position)
            solarSystemScene.add(sunLight);

            // Sun (bright sphere)
            var sunGeometry = new THREE.SphereGeometry(10, 32, 32);
            var sunMaterial = new THREE.MeshBasicMaterial({ color: 0xfacc15 }); // Gold color
            var sun = new THREE.Mesh(sunGeometry, sunMaterial);
            solarSystemScene.add(sun);

            // Planets (simplified representation)
            var planets = [
                { name: '水星', radius: 2, distance: 20, color: 0x94a3b8, speed: 0.02 },
                { name: '金星', radius: 3, distance: 30, color: 0xf97316, speed: 0.015 },
                { name: '地球', radius: 3.5, distance: 40, color: 0x3b82f6, speed: 0.01 },
                { name: '火星', radius: 2.5, distance: 50, color: 0xef4444, speed: 0.008 },
                { name: '木星', radius: 7, distance: 70, color: 0xfcd34d, speed: 0.005 },
                { name: '土星', radius: 6, distance: 90, color: 0xfbbf24, speed: 0.004 },
                { name: '天王星', radius: 5, distance: 110, color: 0x22d3ee, speed: 0.003 },
                { name: '海王星', radius: 4.5, distance: 130, color: 0x60a5fa, speed: 0.0025 }
            ];

            planets.forEach(p => {
                var geometry = new THREE.SphereGeometry(p.radius, 16, 16);
                var material = new THREE.MeshLambertMaterial({ color: p.color });
                var planetMesh = new THREE.Mesh(geometry, material);
                planetMesh.name = p.name; // Store name for identification
                
                // Position the planet on its orbit
                planetMesh.position.set(p.distance, 0, 0);
                solarSystemScene.add(planetMesh);

                // Create orbit line
                var orbitGeometry = new THREE.BufferGeometry().setFromPoints(
                    new THREE.EllipseCurve(0, 0, p.distance, p.distance, 0, 2 * Math.PI, false, 0).getPoints(100)
                );
                var orbitMaterial = new THREE.LineBasicMaterial({ color: 0x334155 }); // Dark grey for orbits
                var orbit = new THREE.Line(orbitGeometry, orbitMaterial);
                solarSystemScene.add(orbit);

                // Store planet data for animation
                planetMesh.userData.distance = p.distance;
                planetMesh.userData.speed = p.speed;
            });

            // Boundaries (simplified rings/spheres)
            // Kuiper Belt (represented as a ring)
            var kuiperBeltRadius = 150; // Represents ~50 AU scale
            var kuiperBeltTube = 1;
            var kuiperBeltSegments = 64;
            var kuiperBeltGeometry = new THREE.TorusGeometry(kuiperBeltRadius, kuiperBeltTube, 2, kuiperBeltSegments);
            var kuiperBeltMaterial = new THREE.MeshBasicMaterial({ color: 0x0f766e, transparent: true, opacity: 0.1 }); // Teal, semi-transparent
            var kuiperBelt = new THREE.Mesh(kuiperBeltGeometry, kuiperBeltMaterial);
            kuiperBelt.rotation.x = Math.PI / 2; // Rotate to lie flat
            solarSystemScene.add(kuiperBelt);


            // Heliosphere (represented as a sphere)
            var heliosphereRadius = 200; // Represents ~120-140 AU scale
            var heliosphereGeometry = new THREE.SphereGeometry(heliosphereRadius, 32, 32);
            var heliosphereMaterial = new THREE.MeshBasicMaterial({ color: 0x818cf8, transparent: true, opacity: 0.05 }); // Purple-blue, very transparent
            var heliosphere = new THREE.Mesh(heliosphereGeometry, heliosphereMaterial);
            solarSystemScene.add(heliosphere);

            // Oort Cloud (represented as a larger, very transparent sphere)
            var oortCloudRadius = 300; // Represents ~3000 AU scale (visually compressed)
            var oortCloudGeometry = new THREE.SphereGeometry(oortCloudRadius, 32, 32);
            var oortCloudMaterial = new THREE.MeshBasicMaterial({ color: 0x94a3b8, transparent: true, opacity: 0.02 }); // Light grey, extremely transparent
            var oortCloud = new THREE.Mesh(oortCloudGeometry, oortCloudMaterial);
            solarSystemScene.add(oortCloud);


            // OrbitControls
            // Check if THREE.OrbitControls is available before instantiating
            if (typeof THREE.OrbitControls !== 'undefined') {
                solarSystemControls = new THREE.OrbitControls(solarSystemCamera, solarSystemRenderer.domElement);
                solarSystemControls.enableDamping = true; // smooth camera movement
                solarSystemControls.dampingFactor = 0.05;
                solarSystemControls.screenSpacePanning = false;
                solarSystemControls.minDistance = 20;
                solarSystemControls.maxDistance = 500;
                solarSystemControls.maxPolarAngle = Math.PI / 2; // Prevent camera from going below the "ground"
            } else {
                console.error("THREE.OrbitControls is not defined. Skipping solar system 3D controls initialization.");
            }

            // Handle window resize
            window.addEventListener('resize', onSolarSystemResize, false);
            function onSolarSystemResize() {
                if (!solarSystemCanvas) return;
                solarSystemCamera.aspect = solarSystemCanvas.clientWidth / solarSystemCanvas.clientHeight;
                solarSystemCamera.updateProjectionMatrix();
                solarSystemRenderer.setSize(solarSystemCanvas.clientWidth, solarSystemCanvas.clientHeight);
            }

            // Animation loop
            function animateSolarSystem() {
                solarSystemAnimationId = requestAnimationFrame(animateSolarSystem);

                // Rotate planets
                solarSystemScene.children.forEach(object => {
                    if (object.userData.speed) {
                        object.rotation.y += object.userData.speed; // Rotate the planet on its axis
                        // To simulate orbit, we can update position based on angle
                        object.position.x = object.userData.distance * Math.cos(object.rotation.y);
                        object.position.z = object.userData.distance * Math.sin(object.rotation.y);
                    }
                });

                if (solarSystemControls) { // Only update controls if they were successfully initialized
                    solarSystemControls.update(); // only required if controls.enableDamping is set to true
                }
                solarSystemRenderer.render(solarSystemScene, solarSystemCamera);
            }

            animateSolarSystem();
        }

        // Nuclear Power 3D Visualizations
        var nuclearPowerCanvases = {
            RTG: document.getElementById('rtg3DCanvas'),
            SRG: document.getElementById('srg3DCanvas'),
            NTP: document.getElementById('ntp3DCanvas'),
            NEP: document.getElementById('nep3DCanvas')
            // SolarSail does not have a 3D canvas
        };

        var nuclearPowerScenes = {};
        var nuclearPowerCameras = {};
        var nuclearPowerRenderers = {};
        var nuclearPowerControls = {};
        var nuclearPowerAnimations = {};
        var activeNuclearSystem = { name: null }; // Track which system's animation is active

        function initNuclearPower3D(systemName) {
            var canvas = nuclearPowerCanvases[systemName];
            if (!canvas) {
                console.error(`Canvas element for systemName "${systemName}" not found. Cannot initialize 3D scene.`);
                return;
            }

            // Prevent re-initialization if already created
            if (nuclearPowerScenes[systemName]) {
                // Just restart animation if scene exists
                if (nuclearPowerAnimations[systemName] && nuclearPowerAnimations[systemName].start) {
                    nuclearPowerAnimations[systemName].start();
                }
                return;
            }

            // Scene
            var scene = new THREE.Scene();
            nuclearPowerScenes[systemName] = scene;
            scene.userData.model = {}; // Initialize model container

            // Camera - Initialize with a default non-zero aspect ratio
            var camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000); // Default aspect 1:1
            camera.position.z = 5;
            nuclearPowerCameras[systemName] = camera;

            // Renderer - Initialize with a default non-zero size
            var renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
            renderer.setSize(1, 1); // Default small size, will be resized when visible
            renderer.setClearColor(0x0a0a0a, 1);
            nuclearPowerRenderers[systemName] = renderer;

            // Lights
            var ambientLight = new THREE.AmbientLight(0x404040);
            scene.add(ambientLight);
            var directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(0, 1, 1);
            scene.add(directionalLight);

            // Controls
            var controls;
            if (typeof THREE.OrbitControls !== 'undefined') {
                controls = new THREE.OrbitControls(camera, renderer.domElement);
                controls.enableDamping = true;
                controls.dampingFactor = 0.05;
                controls.screenSpacePanning = false;
                controls.minDistance = 2;
                controls.maxDistance = 10;
                nuclearPowerControls[systemName] = controls;
            } else {
                console.error("THREE.OrbitControls is not defined. Skipping nuclear power 3D controls initialization.");
            }


            // Specific model for each system
            switch (systemName) {
                case 'RTG':
                    var rtgCasing = new THREE.Mesh(
                        new THREE.BoxGeometry(2, 2, 2),
                        new THREE.MeshLambertMaterial({ color: 0x607d8b }) // Blue-grey
                    );
                    scene.add(rtgCasing);
                    scene.userData.model.casing = rtgCasing;

                    var heatSource = new THREE.Mesh(
                        new THREE.SphereGeometry(0.5, 16, 16),
                        new THREE.MeshBasicMaterial({ color: 0xffa726 }) // Orange-yellow for heat
                    );
                    heatSource.position.y = 0.5;
                    rtgCasing.add(heatSource);
                    scene.userData.model.heatSource = heatSource;

                    var thermoelectricModules = new THREE.Group();
                    for (var i = 0; i < 4; i++) {
                        var module = new THREE.Mesh(
                            new THREE.BoxGeometry(0.2, 1.8, 0.2),
                            new THREE.MeshLambertMaterial({ color: 0x4caf50 }) // Green for thermoelectric
                        );
                        module.position.set(
                            Math.cos(i * Math.PI / 2) * 0.8,
                            0,
                            Math.sin(i * Math.PI / 2) * 0.8
                        );
                        thermoelectricModules.add(module);
                    }
                    rtgCasing.add(thermoelectricModules);

                    nuclearPowerAnimations[systemName] = {
                        start: function() {
                            function animateRTG() {
                                if (nuclearPowerAnimations[systemName].shouldAnimate) {
                                    rtgCasing.rotation.y += 0.005;
                                    heatSource.rotation.x += 0.01;
                                    if (controls) controls.update();
                                    renderer.render(scene, camera);
                                    nuclearPowerAnimations[systemName].animationFrameId = requestAnimationFrame(animateRTG);
                                }
                            }
                            nuclearPowerAnimations[systemName].shouldAnimate = true;
                            animateRTG();
                        },
                        stop: function() {
                            nuclearPowerAnimations[systemName].shouldAnimate = false;
                            if (nuclearPowerAnimations[systemName].animationFrameId) {
                                cancelAnimationFrame(nuclearPowerAnimations[systemName].animationFrameId);
                            }
                        },
                        animationFrameId: null,
                        shouldAnimate: false
                    };
                    break;

                case 'SRG':
                    var srgCasing = new THREE.Mesh(
                        new THREE.CylinderGeometry(1.2, 1.2, 3, 32),
                        new THREE.MeshLambertMaterial({ color: 0x546e7a }) // Darker grey
                    );
                    scene.add(srgCasing);
                    scene.userData.model.casing = srgCasing;

                    var heatExchanger = new THREE.Mesh(
                        new THREE.SphereGeometry(0.6, 16, 16),
                        new THREE.MeshBasicMaterial({ color: 0xff7043 }) // Red-orange for heat
                    );
                    heatExchanger.position.y = 1.2;
                    srgCasing.add(heatExchanger);
                    scene.userData.model.heatExchanger = heatExchanger;

                    var piston = new THREE.Mesh(
                        new THREE.CylinderGeometry(0.3, 0.3, 0.5, 16),
                        new THREE.MeshLambertMaterial({ color: 0x9e9e9e }) // Grey
                    );
                    piston.position.y = -0.5;
                    srgCasing.add(piston);
                    scene.userData.model.piston = piston;

                    var generator = new THREE.Mesh(
                        new THREE.BoxGeometry(0.8, 0.5, 0.8),
                        new THREE.MeshLambertMaterial({ color: 0x42a5f5 }) // Blue for generator
                    );
                    generator.position.y = -1.2;
                    srgCasing.add(generator);
                    scene.userData.model.generator = generator;

                    nuclearPowerAnimations[systemName] = {
                        start: function() {
                            var pistonDirection = 1;
                            function animateSRG() {
                                if (nuclearPowerAnimations[systemName].shouldAnimate) {
                                    srgCasing.rotation.y += 0.005;
                                    heatExchanger.rotation.x += 0.01;

                                    piston.position.y += pistonDirection * 0.02;
                                    if (piston.position.y > 0.5 || piston.position.y < -0.5) {
                                        pistonDirection *= -1;
                                    }

                                    if (controls) controls.update();
                                    renderer.render(scene, camera);
                                    nuclearPowerAnimations[systemName].animationFrameId = requestAnimationFrame(animateSRG);
                                }
                            }
                            nuclearPowerAnimations[systemName].shouldAnimate = true;
                            animateSRG();
                        },
                        stop: function() {
                            nuclearPowerAnimations[systemName].shouldAnimate = false;
                            if (nuclearPowerAnimations[systemName].animationFrameId) {
                                cancelAnimationFrame(nuclearPowerAnimations[systemName].animationFrameId);
                            }
                        },
                        animationFrameId: null,
                        shouldAnimate: false
                    };
                    break;

                case 'NTP':
                    var reactorCore = new THREE.Mesh(
                        new THREE.CylinderGeometry(0.8, 0.8, 1.5, 32),
                        new THREE.MeshLambertMaterial({ color: 0x8bc34a }) // Light green for reactor
                    );
                    scene.add(reactorCore);
                    scene.userData.model.reactorCore = reactorCore;

                    var nozzle = new THREE.Mesh(
                        new THREE.ConeGeometry(1, 1.5, 32),
                        new THREE.MeshLambertMaterial({ color: 0x757575 }) // Grey for nozzle
                    );
                    nozzle.position.y = -1.5;
                    reactorCore.add(nozzle);
                    scene.userData.model.nozzle = nozzle;

                    var exhaustParticles = new THREE.Group();
                    scene.userData.model.exhaustParticles = exhaustParticles;
                    scene.add(exhaustParticles);

                    nuclearPowerAnimations[systemName] = {
                        start: function() {
                            function animateNTP() {
                                if (nuclearPowerAnimations[systemName].shouldAnimate) {
                                    reactorCore.rotation.y += 0.005;
                                    // Animate exhaust particles
                                    if (Math.random() < 0.2) { // Emit new particles
                                        var particle = new THREE.Mesh(
                                            new THREE.SphereGeometry(0.05, 8, 8),
                                            new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true, opacity: 1 })
                                        );
                                        particle.position.set(
                                            (Math.random() - 0.5) * 0.5,
                                            nozzle.position.y - 0.5,
                                            (Math.random() - 0.5) * 0.5
                                        );
                                        particle.userData.velocity = new THREE.Vector3(
                                            (Math.random() - 0.5) * 0.01,
                                            -0.1 - Math.random() * 0.05,
                                            (Math.random() - 0.5) * 0.01
                                        );
                                        exhaustParticles.add(particle);
                                    }

                                    exhaustParticles.children.forEach(p => {
                                        p.position.add(p.userData.velocity);
                                        p.material.opacity -= 0.02;
                                    });
                                    exhaustParticles.children = exhaustParticles.children.filter(p => p.material.opacity > 0);

                                    if (controls) controls.update();
                                    renderer.render(scene, camera);
                                    nuclearPowerAnimations[systemName].animationFrameId = requestAnimationFrame(animateNTP);
                                }
                            }
                            nuclearPowerAnimations[systemName].shouldAnimate = true;
                            animateNTP();
                        },
                        stop: function() {
                            nuclearPowerAnimations[systemName].shouldAnimate = false;
                            if (nuclearPowerAnimations[systemName].animationFrameId) {
                                cancelAnimationFrame(nuclearPowerAnimations[systemName].animationFrameId);
                            }
                            // Clear particles when stopping
                            if (scene.userData.model.exhaustParticles) {
                                scene.userData.model.exhaustParticles.children.forEach(child => child.geometry.dispose());
                                scene.userData.model.exhaustParticles.children = [];
                            }
                        },
                        animationFrameId: null,
                        shouldAnimate: false
                    };
                    break;

                case 'NEP':
                    var reactorUnit = new THREE.Mesh(
                        new THREE.BoxGeometry(1.5, 1.5, 1.5),
                        new THREE.MeshLambertMaterial({ color: 0x795548 }) // Brownish for reactor unit
                    );
                    scene.add(reactorUnit);
                    scene.userData.model.reactorUnit = reactorUnit;

                    var thrusterBody = new THREE.Mesh(
                        new THREE.CylinderGeometry(0.6, 0.8, 1.0, 32),
                        new THREE.MeshLambertMaterial({ color: 0x424242 }) // Dark grey
                    );
                    thrusterBody.position.x = 1.5;
                    reactorUnit.add(thrusterBody);
                    scene.userData.model.thrusterBody = thrusterBody;

                    var ionBeam = new THREE.Mesh(
                        new THREE.CylinderGeometry(0.1, 0.01, 2, 8),
                        new THREE.MeshBasicMaterial({ color: 0x03a9f4, transparent: true, opacity: 0.8 }) // Light blue for ion beam
                    );
                    ionBeam.position.set(1.5, 0, -1.5);
                    ionBeam.rotation.x = Math.PI / 2;
                    thrusterBody.add(ionBeam);
                    scene.userData.model.ionBeam = ionBeam;

                    nuclearPowerAnimations[systemName] = {
                        start: function() {
                            function animateNEP() {
                                if (nuclearPowerAnimations[systemName].shouldAnimate) {
                                    reactorUnit.rotation.y += 0.005;
                                    ionBeam.scale.y = 0.5 + Math.sin(Date.now() * 0.005) * 0.2; // Pulsating beam
                                    ionBeam.material.opacity = 0.6 + Math.sin(Date.now() * 0.005) * 0.2;

                                    if (controls) controls.update();
                                    renderer.render(scene, camera);
                                    nuclearPowerAnimations[systemName].animationFrameId = requestAnimationFrame(animateNEP);
                                }
                            }
                            nuclearPowerAnimations[systemName].shouldAnimate = true;
                            animateNEP();
                        },
                        stop: function() {
                            nuclearPowerAnimations[systemName].shouldAnimate = false;
                            if (nuclearPowerAnimations[systemName].animationFrameId) {
                                cancelAnimationFrame(nuclearPowerAnimations[systemName].animationFrameId);
                            }
                        },
                        animationFrameId: null,
                        shouldAnimate: false
                    };
                    break;
            }

            // Initial resize and render
            onNuclearPowerResize(systemName);
            renderer.render(scene, camera);
        }

        // Handle window resize for nuclear power canvases
        window.addEventListener('resize', () => {
            for (var systemName in nuclearPowerCanvases) {
                if (nuclearPowerCanvases.hasOwnProperty(systemName) && nuclearPowerCanvases[systemName]) {
                    onNuclearPowerResize(systemName);
                }
            }
        }, false);

        function onNuclearPowerResize(systemName) {
            var canvas = nuclearPowerCanvases[systemName];
            var camera = nuclearPowerCameras[systemName];
            var renderer = nuclearPowerRenderers[systemName];

            if (canvas && camera && renderer) {
                var parent = canvas.parentElement;
                if (parent) {
                    var width = parent.clientWidth;
                    var height = canvas.clientHeight; // Keep height fixed as per CSS

                    if (width > 0 && height > 0) {
                        camera.aspect = width / height;
                        camera.updateProjectionMatrix();
                        renderer.setSize(width, height);
                    } else {
                        console.warn(`Canvas for ${systemName} has zero dimensions. Skipping resize.`);
                    }
                }
            }
        }

        // Initialize components that need to be rendered on DOMContentLoaded
        document.addEventListener('DOMContentLoaded', () => {
            renderSolarSystemMap();
            renderImportanceTable();
            renderVoyagerTimeline();
            // Charts are initialized when their respective slides become active
        });
    </script>
</body>
</html>
